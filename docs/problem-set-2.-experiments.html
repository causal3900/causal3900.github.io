<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Problem Set 2. Experiments | Causal Inference Course</title>
<meta name="author" content="Ian Lundberg and Sam Wang">
<meta name="description" content="Relevant material will be covered by Sep 7. Problem set is due Sep 14. To complete the problem set, Download the .Rmd and complete the homework. Omit your name so we can have anonymous peer...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Problem Set 2. Experiments | Causal Inference Course">
<meta property="og:type" content="book">
<meta property="og:description" content="Relevant material will be covered by Sep 7. Problem set is due Sep 14. To complete the problem set, Download the .Rmd and complete the homework. Omit your name so we can have anonymous peer...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Problem Set 2. Experiments | Causal Inference Course">
<meta name="twitter:description" content="Relevant material will be covered by Sep 7. Problem set is due Sep 14. To complete the problem set, Download the .Rmd and complete the homework. Omit your name so we can have anonymous peer...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
<script src="https://tikzjax.com/v1/tikzjax.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Causal Inference Course</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="defining-counterfactuals.html"><span class="header-section-number">1</span> Defining counterfactuals</a></li>
<li class="book-part">Identification by exchangeability</li>
<li><a class="" href="exchangeability-and-experiments.html"><span class="header-section-number">2</span> Exchangeability and experiments</a></li>
<li><a class="" href="consistency-and-positivity.html"><span class="header-section-number">3</span> Consistency and positivity</a></li>
<li><a class="" href="directed-acyclic-graphs.html"><span class="header-section-number">4</span> Directed Acyclic Graphs</a></li>
<li><a class="" href="statistical-modeling.html"><span class="header-section-number">5</span> Statistical modeling</a></li>
<li class="book-part">Identification without exchangeability</li>
<li><a class="" href="front-door.html"><span class="header-section-number">6</span> Front door</a></li>
<li><a class="" href="instrumental-variables.html"><span class="header-section-number">7</span> Instrumental variables</a></li>
<li><a class="" href="regression-discontinuity.html"><span class="header-section-number">8</span> Regression discontinuity</a></li>
<li><a class="" href="difference-in-difference.html"><span class="header-section-number">9</span> Difference in difference</a></li>
<li><a class="" href="synthetic-control.html"><span class="header-section-number">10</span> Synthetic control</a></li>
<li class="book-part">Areas of active research</li>
<li><a class="" href="data-driven-methods.html"><span class="header-section-number">11</span> Data-driven methods</a></li>
<li><a class="" href="current-research.html"><span class="header-section-number">12</span> Current research</a></li>
<li><a class="" href="course-recap.html"><span class="header-section-number">13</span> Course recap</a></li>
<li class="book-part">Discussions</li>
<li><a class="" href="discussion-02.-stats-review.html">Discussion 02. Stats review</a></li>
<li><a class="" href="discussion-03.-analyzing-an-experiment-in-r.html">Discussion 03. Analyzing an Experiment in R</a></li>
<li><a class="" href="discussion-03.-analyzing-an-experiment-in-r-solutions.html">Discussion 03. Analyzing an Experiment in R SOLUTIONS</a></li>
<li><a class="" href="discussion-07.-causal-effects-with-matching.html">Discussion 07. Causal Effects with Matching</a></li>
<li><a class="" href="discussion-10.-causal-effects-with-regression-discontinuity.html">Discussion 10. Causal Effects with Regression Discontinuity</a></li>
<li><a class="" href="discussion-12.-empirical-application-how-the-onset-of-violent-conflict-affects-economic-output.html">Discussion 12. Empirical Application: How the Onset of Violent Conflict Affects Economic Output</a></li>
<li class="book-part">Assignments</li>
<li><a class="" href="due-dates.html">Due dates</a></li>
<li><a class="" href="final-project.html">Final Project</a></li>
<li><a class="" href="problem-set-1.-definitions.html">Problem Set 1. Definitions</a></li>
<li><a class="active" href="problem-set-2.-experiments.html">Problem Set 2. Experiments</a></li>
<li><a class="" href="problem-set-3.-dags..html">Problem Set 3. DAGs.</a></li>
<li><a class="" href="problem-set-4.-statistical-modeling.html">Problem Set 4. Statistical modeling</a></li>
<li><a class="" href="problem-set-5.-iv-rd.html">Problem Set 5. IV + RD</a></li>
<li><a class="" href="problem-set-6.-difference-in-difference-synthetic-control.html">Problem Set 6. Difference in Difference + Synthetic Control</a></li>
<li class="book-part">Course information</li>
<li><a class="" href="who-we-are.html">Who we are</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="problem-set-2.-experiments" class="section level1 unnumbered">
<h1>Problem Set 2. Experiments<a class="anchor" aria-label="anchor" href="#problem-set-2.-experiments"><i class="fas fa-link"></i></a>
</h1>
<p>Relevant material will be covered by <strong>Sep 7</strong>. Problem set is due <strong>Sep 14</strong>.</p>
<p>To complete the problem set, <a href="https://raw.githubusercontent.com/causal3900/causal3900.github.io/main/assets/psets/pset2_download.Rmd"><strong>Download the .Rmd</strong></a> and complete the homework. Omit your name so we can have anonymous peer feedback. Compile to a PDF and submit the PDF on <a href="https://canvas.cornell.edu/courses/57329">Canvas</a>.</p>
<p>This problem set is based on:</p>
<p>Bertrand, M &amp; Mullainathan, S. 2004. “<a href="https://www-jstor-org.proxy.library.cornell.edu/stable/3592802">Are Emily and Greg More Employable Than Lakisha and Jamal? A Field Experiment on Labor Market Discrimination</a>.” American Economic Review 94(4):991–1013.</p>
<p>Here’s a heads-up about what will be hard in this problem set</p>
<ul>
<li>for some, reading a social science paper will be hard</li>
<li>for some, mathematical statistics will be hard</li>
<li>for some, R coding will be hard</li>
</ul>
<p>For almost no one will all three be easy.</p>
<blockquote>
<p>We want to support you to succeed! Text in this format is here to help you.</p>
</blockquote>
<div id="conceptual-questions-about-the-study-design" class="section level2 unnumbered">
<h2>1. Conceptual questions about the study design<a class="anchor" aria-label="anchor" href="#conceptual-questions-about-the-study-design"><i class="fas fa-link"></i></a>
</h2>
<p>Read the first 10 pages of the paper (through the end of section 2). In this paper,</p>
<ul>
<li>the unit of analysis is a resume submitted to a job opening</li>
<li>the treatment is the name at the top of the resume</li>
<li>the outcome is whether the employer called or emailed back for an interview</li>
</ul>
<div id="points-fundamental-problem" class="section level3 unnumbered">
<h3>1.1. (5 points) Fundamental Problem<a class="anchor" aria-label="anchor" href="#points-fundamental-problem"><i class="fas fa-link"></i></a>
</h3>
<p>One submitted resume had the name “Emily Baker.” It yielded a callback. The same resume could have had the name “Lakisha Washington.” Explain how the Fundamental Problem of Causal Inference applies to this case (1–2 sentences).</p>
</div>
<div id="points-exchangeability" class="section level3 unnumbered">
<h3>1.2. (5 points) Exchangeability<a class="anchor" aria-label="anchor" href="#points-exchangeability"><i class="fas fa-link"></i></a>
</h3>
<p>In a sentence, state what exchangeability means in this study. For concreteness, for this question you may suppose that the only names in the study were “Emily Baker” and “Lakisha Washington.” Be sure to explicitly state the treatment and the potential outcomes.</p>
</div>
<div id="points-something-you-liked" class="section level3 unnumbered">
<h3>1.3. (10 points) Something you liked<a class="anchor" aria-label="anchor" href="#points-something-you-liked"><i class="fas fa-link"></i></a>
</h3>
<p>State something concrete that you appreciate about the study design, other than randomization.</p>
</div>
</div>
<div id="analyzing-the-experimental-data" class="section level2 unnumbered">
<h2>2. Analyzing the experimental data<a class="anchor" aria-label="anchor" href="#analyzing-the-experimental-data"><i class="fas fa-link"></i></a>
</h2>
<p>Load packages that our code will use.</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span></code></pre></div>
<p>Download the study’s data from OpenICPSR: <a href="https://www.openicpsr.org/openicpsr/project/116023/version/V1/view">https://www.openicpsr.org/openicpsr/project/116023/version/V1/view</a>. This will require creating an account and agreeing to terms for using the data ethically. Put the data in the folder on your computer where this .Rmd is located. Read the data into R using <code>read_dta</code>.</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"lakisha_aer.dta"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>If you have an error, you might need to set your working directory first. This tells R where to look for data files. At the top of RStudio, click Session -&gt; Set Working Directory -&gt; To Source File Location.</p>
</blockquote>
<p>You will now see <code>d</code> in your Global Environment at the top right of RStudio.</p>
<p>We will use four variables:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Name</th>
<th>Role</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>call</code></td>
<td>outcome</td>
<td>1 if resume submission yielded a callback</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>0 if not</td>
</tr>
<tr class="odd">
<td><code>firstname</code></td>
<td>treatment</td>
<td>first name randomly assigned to resume</td>
</tr>
<tr class="even">
<td><code>race</code></td>
<td>category of treatments</td>
<td>
<code>b</code> if first name signals Black</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>
<code>w</code> if first name signals white</td>
</tr>
<tr class="even">
<td><code>sex</code></td>
<td>category of treatments</td>
<td>
<code>f</code> if first name signals female</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>
<code>m</code> if first name signals male</td>
</tr>
</tbody>
</table></div>
<p>For 2.1–2.4, we will think of <code>race</code> as the treatment. For 2.5–2.6, we will think of <code>firstname</code> as the treatment.</p>
<p>Restrict to these variables using <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_selected</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">call</span>, <span class="va">firstname</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>If you are new to R, here is what just happened:</p>
<ul>
<li>created a new object <code>d_selected</code>
</li>
<li>used the assignment operator <code>&lt;-</code> to put something in that object</li>
<li>we started with our data object <code>d</code>
</li>
<li>we used the pipe operator <code>%&gt;%</code> to hand <code>d</code> down into a new action</li>
<li>the action <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> selected only the variables of interest</li>
</ul>
<p>We will often analyze data by starting with a data object and handing that through a series of actions connected by the pipe <code>%&gt;%</code></p>
</blockquote>
<div id="points-point-estimates-of-expected-potential-outcomes" class="section level3 unnumbered">
<h3>2.1. (5 points) Point estimates of expected potential outcomes<a class="anchor" aria-label="anchor" href="#points-point-estimates-of-expected-potential-outcomes"><i class="fas fa-link"></i></a>
</h3>
<p>The top of Table 1 reports callback rates: 9.65% for white names and 6.45% for Black names. Reproduce those numbers. To do so, take the code below but add a <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> action between <code>d_selected</code> and <code>summarize</code>.</p>
<blockquote>
<p>Here’s a <a href="https://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise">reference</a> that introduces <code>group_by</code> and <code>summarize</code>.</p>
</blockquote>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_summarized</span> <span class="op">&lt;-</span> <span class="va">d_selected</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>callback_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">call</span><span class="op">)</span>,</span>
<span>            number_cases <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   callback_rate number_cases
##           &lt;dbl&gt;        &lt;int&gt;
## 1        0.0805         4870</code></pre>
</div>
<div id="points-inference-for-expected-potential-outcomes" class="section level3 unnumbered">
<h3>2.2. (5 points) Inference for expected potential outcomes<a class="anchor" aria-label="anchor" href="#points-inference-for-expected-potential-outcomes"><i class="fas fa-link"></i></a>
</h3>
<p>Use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> (see <a href="https://dplyr.tidyverse.org/reference/mutate.html#ref-examples">reference page</a>) to create a new columns containing the standard error of each estimate as well as lower and upper limits of 95% confidence intervals.</p>
<blockquote>
<p>To make this easier, here is a quick math review and R functions you can use.</p>
</blockquote>
<blockquote>
<p><strong>Standard error in math.</strong> Let <span class="math inline">\(Y^a\)</span> be a Bernoulli random variable, taking the value 1 if a random resume with name <span class="math inline">\(a\)</span> yields a callback and 0 otherwise. Let <span class="math inline">\(\pi^a = P(Y^a=1)\)</span> be the probability of a callback. From statistics, you know this has variance <span class="math inline">\(V(Y^a) = \pi^a (1-\pi^a)\)</span>. We have estimated by an average: <span class="math inline">\(\hat\pi^a = \frac{1}{n_a}\sum_{i:A_i=a} Y_i^a\)</span>. If we did this many times in many hypothetical samples, we would not always get the same estimate. In fact, our estimate would have sampling variance <span class="math inline">\(V(\hat\pi^a) = \frac{\pi^a(1-\pi^a)}{n_a}\)</span>. We know this because <span class="math inline">\(\hat\pi^a\)</span> is a mean of <span class="math inline">\(n_a\)</span> independent and identically distributed random variables <span class="math inline">\(Y^a\)</span>. The standard error is the square root of the sampling variance: <span class="math inline">\(SE(\hat\pi^a) = \sqrt\frac{\pi^a(1-\pi^a)}{n_a}\)</span>. We can estimate this standard error by plugging in our estimate <span class="math inline">\(\hat\pi^a\)</span> for the true unknown <span class="math inline">\(\pi^a\)</span> wherever it appears.</p>
</blockquote>
<blockquote>
<p><strong>Standard error in code.</strong> We translated the standard error formula into code for you below. This function accepts an estimated probability <code>p</code> and sample size <code>n</code> and returns the estimated standard error. You can use this <code>se_binary()</code> function in your code within <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> just like how <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> was used within <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> at the start of the problem set.</p>
</blockquote>
<blockquote>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">se_binary</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">p</span>, <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">se</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span> <span class="va">p</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">p</span><span class="op">)</span> <span class="op">/</span> <span class="va">n</span> <span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">se</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</blockquote>
<blockquote>
<p><strong>Sampling distribution in math.</strong> Because <span class="math inline">\(\hat\pi^a\)</span> is a sample mean, we know something about its sampling distribution: in the limit as the sample size grows to infinity, across hypothetical repeated samples the distribution of <span class="math inline">\(\hat\pi^a\)</span> estimates becomes Normal. This is by the Central Limit Theorem! Across repeated samples, the middle 95% of estimates will fall within a known range: <span class="math inline">\(\pi^a \pm \Phi^{-1}(.975) \times SE(\hat\pi^a)\)</span>, where <span class="math inline">\(\Phi^{-1}()\)</span> is the inverse cumulative distribution function of the standard Normal distribution. You might have previously learned that <span class="math inline">\(\Phi^{-1}(.975) \approx 1.96\)</span>, so what might be familiar to you is the number 1.96.</p>
</blockquote>
<blockquote>
<p><strong>Sampling distribution in a graph.</strong></p>
</blockquote>
<blockquote>
<div class="inline-figure"><img src="pset2_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
</blockquote>
<blockquote>
<p><strong>Confidence interval in math.</strong> We get a 95% confidence interval by plugging in the estimates <span class="math inline">\(\hat\pi^a\)</span> and <span class="math inline">\(\widehat{SE}(\hat\pi^a)\)</span> to the limits above. This interval is centered on the estimate <span class="math inline">\(\hat\pi^a\)</span> and has a nice property: if we repeatedly made a confidence interval by this procedure using hypothetical samples from the population, our interval would contain the unknown true parameter <span class="math inline">\(\pi^a\)</span> 95% of the time.</p>
</blockquote>
<blockquote>
<p><strong>Confidence interval in code.</strong> We translated the confidence interval formula into code for you below. These functions accept an estimate and standard error and return the lower and upper bounds (respectively) of a 95% confidence interval that assumes a Normal sampling distribution. You can use these functions in your code within <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> just like how <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> was used within <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> at the start of the problem set.</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ci_lower</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">estimate</span>, <span class="va">standard_error</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">estimate</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span> <span class="op">*</span> <span class="va">standard_error</span></span>
<span><span class="op">}</span></span>
<span><span class="va">ci_upper</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">estimate</span>, <span class="va">standard_error</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">estimate</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span> <span class="op">*</span> <span class="va">standard_error</span></span>
<span><span class="op">}</span></span></code></pre></div>
</blockquote>
</div>
<div id="points-interpret-your-confidence-interval" class="section level3 unnumbered">
<h3>2.3. (5 points) Interpret your confidence interval<a class="anchor" aria-label="anchor" href="#points-interpret-your-confidence-interval"><i class="fas fa-link"></i></a>
</h3>
<p>In words, interpret the confidence intervals. Be sure to discuss what their property is over hypothetical repeated samples, and be sure to frame your answer using the numbers and variables from the actual experiment we are analyzing.</p>
</div>
<div id="points-visualize-expected-potential-outcomes" class="section level3 unnumbered">
<h3>2.4. (5 points) Visualize expected potential outcomes<a class="anchor" aria-label="anchor" href="#points-visualize-expected-potential-outcomes"><i class="fas fa-link"></i></a>
</h3>
<p>Using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, visualize the estimated callback rate by race. Use <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> for point estimates and <code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar()</a></code> for confidence intervals, with race on the <code>x</code> axis and estimates on the <code>y</code> axis. Label the axes using full words.</p>
<blockquote>
<p>If you have never used <code>ggplot</code>, see <a href="https://r4ds.had.co.nz/data-visualisation.html">Ch 3</a> of R for Data Science by Hadley Wickham.</p>
</blockquote>
</div>
<div id="points-estimate-and-visualize-by-firstname" class="section level3 unnumbered">
<h3>2.5. (5 points) Estimate and visualize by firstname<a class="anchor" aria-label="anchor" href="#points-estimate-and-visualize-by-firstname"><i class="fas fa-link"></i></a>
</h3>
<p>Do distinct first names yield distinct effects? Repeat 2.2–2.4, but now create estimates grouped by <code>race</code>, <code>sex</code>, and <code>firstname</code>. Visualize point estimates and confidence intervals.</p>
<blockquote>
<p>One way to visualize is by placing first names on the <span class="math inline">\(x\)</span>-axis and using a <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> layer to facet over race and sex.</p>
</blockquote>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">your_ggplot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">race</span> <span class="op">+</span> <span class="va">sex</span>,</span>
<span>             scales <span class="op">=</span> <span class="st">"free_x"</span>, </span>
<span>             nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>Any strategy to visualize is fine, as long as it shows estimates for each <code>firstname</code> and indicates the <code>race</code> and <code>sex</code> signaled by that <code>firstname</code></p>
</blockquote>
</div>
<div id="points-interpret" class="section level3 unnumbered">
<h3>2.6. (5 points) Interpret<a class="anchor" aria-label="anchor" href="#points-interpret"><i class="fas fa-link"></i></a>
</h3>
<p>Within race and sex, not all first names have the same effect. Suppose these are true differences (not due to sampling variability). What does this tell you about the importance of researcher decisions about which names to use as treatments?</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="problem-set-1.-definitions.html">Problem Set 1. Definitions</a></div>
<div class="next"><a href="problem-set-3.-dags..html">Problem Set 3. DAGs.</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#problem-set-2.-experiments">Problem Set 2. Experiments</a></li>
<li>
<a class="nav-link" href="#conceptual-questions-about-the-study-design">1. Conceptual questions about the study design</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#points-fundamental-problem">1.1. (5 points) Fundamental Problem</a></li>
<li><a class="nav-link" href="#points-exchangeability">1.2. (5 points) Exchangeability</a></li>
<li><a class="nav-link" href="#points-something-you-liked">1.3. (10 points) Something you liked</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#analyzing-the-experimental-data">2. Analyzing the experimental data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#points-point-estimates-of-expected-potential-outcomes">2.1. (5 points) Point estimates of expected potential outcomes</a></li>
<li><a class="nav-link" href="#points-inference-for-expected-potential-outcomes">2.2. (5 points) Inference for expected potential outcomes</a></li>
<li><a class="nav-link" href="#points-interpret-your-confidence-interval">2.3. (5 points) Interpret your confidence interval</a></li>
<li><a class="nav-link" href="#points-visualize-expected-potential-outcomes">2.4. (5 points) Visualize expected potential outcomes</a></li>
<li><a class="nav-link" href="#points-estimate-and-visualize-by-firstname">2.5. (5 points) Estimate and visualize by firstname</a></li>
<li><a class="nav-link" href="#points-interpret">2.6. (5 points) Interpret</a></li>
</ul>
</li>
</ul>
      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="syllabus" href="assets/Syllabus_Causal_Inference_3900.pdf">Syllabus </a></li>
          <li><a id="canvas" href="https://canvas.cornell.edu/courses/57329">Canvas </a></li>
          <li><a id="ed" href="https://edstem.org/us/courses/40928">Ed Discussion </a></li>
          
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>Last built on 2023-11-28</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This site was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
