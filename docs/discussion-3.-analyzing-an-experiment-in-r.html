<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Discussion 3. Analyzing an Experiment in R | Causal Inference Course</title>
<meta name="author" content="Ian Lundberg and Sam Wang">
<meta name="description" content="13.4 Get out and Vote Experiment In this lab we are going to explore an experiment that digs into the mechanisms underlying why people vote. A long-standing theory as to why many people vote is...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Discussion 3. Analyzing an Experiment in R | Causal Inference Course">
<meta property="og:type" content="book">
<meta property="og:description" content="13.4 Get out and Vote Experiment In this lab we are going to explore an experiment that digs into the mechanisms underlying why people vote. A long-standing theory as to why many people vote is...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Discussion 3. Analyzing an Experiment in R | Causal Inference Course">
<meta name="twitter:description" content="13.4 Get out and Vote Experiment In this lab we are going to explore an experiment that digs into the mechanisms underlying why people vote. A long-standing theory as to why many people vote is...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
<script src="https://tikzjax.com/v1/tikzjax.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Causal Inference Course</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="defining-counterfactuals.html"><span class="header-section-number">1</span> Defining counterfactuals</a></li>
<li class="book-part">Identification by exchangeability</li>
<li><a class="" href="exchangeability-and-experiments.html"><span class="header-section-number">2</span> Exchangeability and experiments</a></li>
<li><a class="" href="consistency-and-positivity.html"><span class="header-section-number">3</span> Consistency and positivity</a></li>
<li><a class="" href="directed-acyclic-graphs.html"><span class="header-section-number">4</span> Directed Acyclic Graphs</a></li>
<li><a class="" href="statistical-modeling.html"><span class="header-section-number">5</span> Statistical modeling</a></li>
<li class="book-part">Identification without exchangeability</li>
<li><a class="" href="front-door.html"><span class="header-section-number">6</span> Front door</a></li>
<li><a class="" href="instrumental-variables.html"><span class="header-section-number">7</span> Instrumental variables</a></li>
<li><a class="" href="regression-discontinuity.html"><span class="header-section-number">8</span> Regression discontinuity</a></li>
<li><a class="" href="difference-in-difference.html"><span class="header-section-number">9</span> Difference in difference</a></li>
<li><a class="" href="synthetic-control.html"><span class="header-section-number">10</span> Synthetic control</a></li>
<li class="book-part">Areas of active research</li>
<li><a class="" href="data-driven-methods.html"><span class="header-section-number">11</span> Data-driven methods</a></li>
<li><a class="" href="current-research.html"><span class="header-section-number">12</span> Current research</a></li>
<li><a class="" href="course-recap.html"><span class="header-section-number">13</span> Course recap</a></li>
<li class="book-part">Discussions</li>
<li><a class="" href="discussion-2.-stats-review.html">Discussion 2. Stats review</a></li>
<li><a class="active" href="discussion-3.-analyzing-an-experiment-in-r.html">Discussion 3. Analyzing an Experiment in R</a></li>
<li class="book-part">Assignments</li>
<li><a class="" href="due-dates.html">Due dates</a></li>
<li><a class="" href="problem-set-1.-definitions.html">Problem Set 1. Definitions</a></li>
<li><a class="" href="problem-set-2.-experiments.html">Problem Set 2. Experiments</a></li>
<li><a class="" href="problem-set-3.-dags.html">Problem Set 3. DAGs</a></li>
<li><a class="" href="problem-set-4.-statistical-modeling.html">Problem Set 4. Statistical modeling</a></li>
<li><a class="" href="problem-set-5.-iv-rd.html">Problem Set 5. IV + RD</a></li>
<li><a class="" href="problem-set-6.-did-synthetic-control.html">Problem Set 6. DID + synthetic control</a></li>
<li class="book-part">Course information</li>
<li><a class="" href="who-we-are.html">Who we are</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="discussion-3.-analyzing-an-experiment-in-r" class="section level1 unnumbered">
<h1>Discussion 3. Analyzing an Experiment in R<a class="anchor" aria-label="anchor" href="#discussion-3.-analyzing-an-experiment-in-r"><i class="fas fa-link"></i></a>
</h1>
<div id="get-out-and-vote-experiment" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Get out and Vote Experiment<a class="anchor" aria-label="anchor" href="#get-out-and-vote-experiment"><i class="fas fa-link"></i></a>
</h2>
<p>In this lab we are going to explore an experiment that digs into the mechanisms
underlying <strong>why people vote</strong>. A long-standing theory as to why many people
vote is that it is driven by social norms (e.g. the understanding that voting
is their civic duty). This theory, while being a dominant theoretical
explanation, had very little empirical backing for a long time. This experiment
examines this very theory by asking the question:
<strong>to what extent do social norms cause voter turnout</strong>?</p>
<div id="experimental-design" class="section level3" number="13.4.1">
<h3>
<span class="header-section-number">13.4.1</span> Experimental Design<a class="anchor" aria-label="anchor" href="#experimental-design"><i class="fas fa-link"></i></a>
</h3>
<p>In order to answer this question, approximately 80,000 Michigan households
were randomly assigned to treatment and control groups, where the treatment
group was randomly assigned to one of four possible treatment arms. These
treatment arms varied in the intensity of social pressure that they conveyed,
and were defined as follows:</p>
<ul>
<li>The first treatment arm was mailed a letter that simply reminded them that
voting is a civic duty.</li>
<li>The second treatment arm was mailed a letter telling them that researchers
would be studying their voting turnout based on public records.</li>
<li>The third treatment arm was mailed a letter stating that their voting turnout
would be revealed to all other members of their household.</li>
<li>The fourth treatment arm was mailed a letter stating that their voting turnout
would be revealed to their household <em>and</em> to their neighbors.</li>
</ul>
</div>
</div>
<div id="download-the-data" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Download the data<a class="anchor" aria-label="anchor" href="#download-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>The first step is to download the data <a href="assets/data/social_pressure.dta">here</a>.</p>
</div>
<div id="analyze-experiment" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> Analyze Experiment<a class="anchor" aria-label="anchor" href="#analyze-experiment"><i class="fas fa-link"></i></a>
</h2>
<div id="necessary-packages" class="section level3" number="13.6.1">
<h3>
<span class="header-section-number">13.6.1</span> Necessary packages<a class="anchor" aria-label="anchor" href="#necessary-packages"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div id="import-data" class="section level3" number="13.6.2">
<h3>
<span class="header-section-number">13.6.2</span> Import data<a class="anchor" aria-label="anchor" href="#import-data"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gotv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"https://causal3900.github.io/assets/data/social_pressure.dta"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="clean-data" class="section level3" number="13.6.3">
<h3>
<span class="header-section-number">13.6.3</span> Clean data<a class="anchor" aria-label="anchor" href="#clean-data"><i class="fas fa-link"></i></a>
</h3>
<p>You’ll need to construct <code>age</code> from the <code>yob</code> variable.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gotv</span> <span class="op">&lt;-</span> <span class="va">gotv</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fl">2006</span> <span class="op">-</span> <span class="va">yob</span><span class="op">)</span>,</span>
<span>    hh_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">hh_size</span><span class="op">)</span>,</span>
<span>    treatment <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">treatment</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Control"</span>,</span>
<span>      <span class="va">treatment</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Hawthorne"</span>,</span>
<span>      <span class="va">treatment</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Civic Duty"</span>,</span>
<span>      <span class="va">treatment</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Neighbors"</span>,</span>
<span>      <span class="va">treatment</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"Self"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://haven.tidyverse.org/reference/zap_labels.html">zap_labels</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="balance-table" class="section level3" number="13.6.4">
<h3>
<span class="header-section-number">13.6.4</span> Balance table<a class="anchor" aria-label="anchor" href="#balance-table"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"age"</span>, <span class="st">"g2000"</span>, <span class="st">"g2002"</span>, <span class="st">"p2000"</span>, <span class="st">"p2002"</span>, <span class="st">"p2004"</span>, <span class="st">"hh_size"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gotv</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="va">covariates</span><span class="op">)</span>, .fns <span class="op">=</span> <span class="va">mean</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">treatment</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 9
##   treatment    sex   age g2000 g2002 p2000 p2002 p2004
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Civic Duty 0.500  49.7 0.842 0.811 0.254 0.389 0.399
## 2 Hawthorne  0.499  49.7 0.844 0.813 0.250 0.394 0.403
## 3 Control    0.499  49.8 0.843 0.811 0.252 0.389 0.400
## 4 Self       0.500  49.8 0.840 0.811 0.251 0.392 0.402
## 5 Neighbors  0.500  49.9 0.842 0.811 0.251 0.387 0.407
## # ℹ 1 more variable: hh_size &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gotv |&gt;</span></span>
<span><span class="co">#   tbl_summary(</span></span>
<span><span class="co">#     include = all_of(covariates),</span></span>
<span><span class="co">#     type = list(everything() ~ "continuous"),</span></span>
<span><span class="co">#     by = treatment,</span></span>
<span><span class="co">#     statistic = list(all_continuous() ~ "{mean}"),</span></span>
<span><span class="co">#     label = list(</span></span>
<span><span class="co">#       sex ~ "Female",</span></span>
<span><span class="co">#       age ~ "Age (in years)"</span></span>
<span><span class="co">#     ),</span></span>
<span><span class="co">#     digits = list(age ~ 3)</span></span>
<span><span class="co">#   )</span></span></code></pre></div>
</div>
<div id="results" class="section level3" number="13.6.5">
<h3>
<span class="header-section-number">13.6.5</span> Results<a class="anchor" aria-label="anchor" href="#results"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gotv</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>`Percentage Voting` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">voted</span><span class="op">)</span>, `N of Individuals` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">treatment</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   treatment  `Percentage Voting` `N of Individuals`
##   &lt;chr&gt;                    &lt;dbl&gt;              &lt;int&gt;
## 1 Civic Duty               0.315              38218
## 2 Hawthorne                0.322              38204
## 3 Control                  0.297             191243
## 4 Self                     0.345              38218
## 5 Neighbors                0.378              38201</code></pre>

</div>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="discussion-2.-stats-review.html">Discussion 2. Stats review</a></div>
<div class="next"><a href="due-dates.html">Due dates</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#discussion-3.-analyzing-an-experiment-in-r">Discussion 3. Analyzing an Experiment in R</a></li>
<li>
<a class="nav-link" href="#get-out-and-vote-experiment"><span class="header-section-number">13.4</span> Get out and Vote Experiment</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#experimental-design"><span class="header-section-number">13.4.1</span> Experimental Design</a></li></ul>
</li>
<li><a class="nav-link" href="#download-the-data"><span class="header-section-number">13.5</span> Download the data</a></li>
<li>
<a class="nav-link" href="#analyze-experiment"><span class="header-section-number">13.6</span> Analyze Experiment</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#necessary-packages"><span class="header-section-number">13.6.1</span> Necessary packages</a></li>
<li><a class="nav-link" href="#import-data"><span class="header-section-number">13.6.2</span> Import data</a></li>
<li><a class="nav-link" href="#clean-data"><span class="header-section-number">13.6.3</span> Clean data</a></li>
<li><a class="nav-link" href="#balance-table"><span class="header-section-number">13.6.4</span> Balance table</a></li>
<li><a class="nav-link" href="#results"><span class="header-section-number">13.6.5</span> Results</a></li>
</ul>
</li>
</ul>
      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="syllabus" href="assets/Syllabus_Causal_Inference_3900.pdf">Syllabus </a></li>
          <li><a id="canvas" href="https://canvas.cornell.edu/courses/57329">Canvas </a></li>
          <li><a id="ed" href="https://edstem.org/us/courses/40928">Ed Discussion </a></li>
          
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>Last built on 2023-09-05</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This site was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
