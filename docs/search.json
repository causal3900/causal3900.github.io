[{"path":"index.html","id":"welcome","chapter":"Welcome","heading":"Welcome","text":"Cornell STSCI / INFO / ILRST 3900. Causal Inference. Fall 2025.Welcome! Together, learn make causal claims combining data arguments.Taught Christina Lee Yu, Y. Samuel Wang, Filippo Fiocchi, Shira Mingelgrin. Read us !","code":""},{"path":"index.html","id":"learning-objectives","chapter":"Welcome","heading":"Learning objectives","text":"result participating course, students able todefine counterfactuals outcomes hypothetical interventionsidentify counterfactuals causal assumptions presented graphsestimate counterfactual outcomes pairing assumptions statistical evidence","code":""},{"path":"index.html","id":"is-this-course-for-me","chapter":"Welcome","heading":"Is this course for me?","text":"course designed upper-division undergraduate students. assume familiarity introductory statistics course level STSCI 2110, PAM 2100, PSYCH 2500, SOC 3010, ECON 3110, similar courses. also assume students familiar statistical computing language R.Cornell student? welcome follow along site.","code":""},{"path":"index.html","id":"readings","chapter":"Welcome","heading":"Readings","text":"Especially beginning, course draws heavily onHernán, M.., J.M. Robins. 2020. Causal Inference: ? Boca Raton: Chapman & Hall / CRC.grateful authors excellent text.","code":""},{"path":"index.html","id":"organization-of-the-site","chapter":"Welcome","heading":"Organization of the site","text":"course module left panel span several lectures. Within module, right panel help navigate. build site course semester, uploading lecture slides go. tells bit teaching team.","code":""},{"path":"index.html","id":"previous-iterations-of-the-course","chapter":"Welcome","heading":"Previous iterations of the course","text":"Much material course draw directly previous iterations course also developed Ian Lundberg Mayleen Cortez-Rodriguez.access course website Fall 2023 click .","code":""},{"path":"index.html","id":"land-acknowledgment","chapter":"Welcome","heading":"Land acknowledgment","text":"recognize university land acknowledgment, well additional emphasis Cornell American Indian Indigenous Studies Program.Cornell University located traditional homelands Gayogo̱hó:nǫɁ (Cayuga Nation). Gayogo̱hó:nǫɁ members Haudenosaunee Confederacy, alliance six sovereign Nations historic contemporary presence land. Confederacy precedes establishment Cornell University, New York state, United States America. acknowledge painful history Gayogo̱hó:nǫɁ dispossession, honor ongoing connection Gayogo̱hó:nǫɁ people, past present, lands waters.land acknowledgment reviewed approved traditional Gayogo̱hó:nǫɁ leadership.addition Gayogo̱hó:nǫɁ land acknowledgment separate , AIISP faculty like emphasize: Cornell’s founding enabled course national genocide sale almost one million acres stolen Indian land Morrill Act 1862. date university neither officially acknowledged complicity theft offered form restitution hundreds Native communities impacted. additional information, see Cornell University Indigenous Dispossession website.","code":""},{"path":"defining-counterfactuals.html","id":"defining-counterfactuals","chapter":"1 Defining counterfactuals","heading":"1 Defining counterfactuals","text":"","code":""},{"path":"defining-counterfactuals.html","id":"observing-versus-intervening","chapter":"1 Defining counterfactuals","heading":"1.1 Observing versus intervening","text":"Aug 26. <!–\nSlides–!>\nclass, install R Rstudio computer (see slide 14 today’s lecture).Statistical inference observing: observe sample population, can infer population? Causal inference intervening: take sample population intervene change exposure, average outcome result?Today discuss observing, intervening, difference important.","code":""},{"path":"defining-counterfactuals.html","id":"lab-designing-a-study","chapter":"1 Defining counterfactuals","heading":"1.2 Lab: Designing a study","text":"Aug 27In lab, start getting know one another. , discuss hypothetical scenario.researcher (may disagree) says :\n> Coming office hours frequently causes student success classroom.groups 3 students, discuss following.Imagine start semester. design randomized experiment assess claim?\nImagine can assign students treatment condition comply\nConsider details: enroll, define frequently, assess success, etc.\nImagine can assign students treatment condition complyConsider details: enroll, define frequently, assess success, etc.Imagine end semester. randomized study run. want conduct observational study using administrative records (get IRB approval ). design observational study assess claim?expectation clear answers now. course semester learn formalize types questions solutions.","code":""},{"path":"defining-counterfactuals.html","id":"defining-causal-effects","chapter":"1 Defining counterfactuals","heading":"1.3 Defining causal effects","text":"Aug 28. <!–Slides.–!>\nclass, read Chapter 1 Hernán Robins 2020.Today define average causal effects potential outcomes framework.end class, able todefine potential outcomesexplain Fundamental Problem Causal Inference1recall statistical concepts: random variables, expectation, conditional expectation","code":""},{"path":"exchangeability-and-experiments.html","id":"exchangeability-and-experiments","chapter":"2 Exchangeability and experiments","heading":"2 Exchangeability and experiments","text":"","code":""},{"path":"exchangeability-and-experiments.html","id":"randomized-experiments","chapter":"2 Exchangeability and experiments","heading":"2.1 Randomized experiments","text":"Sep 3. Slides. class, read Hernán Robins 2020 Chapter 2 end 2.1.Much course address observational studies non-randomized treatments. set stage, today first discuss randomized experiments powerful possible.","code":""},{"path":"exchangeability-and-experiments.html","id":"lab-statistics-review-with-math-and-simulations","chapter":"2 Exchangeability and experiments","heading":"2.2 Lab: Statistics review with math and simulations","text":"Sep 4. Slides.course use several ideas previous coursework statistics, including random variables, expected values, independence. lab review concepts math using simulations R. Download R script demo ","code":""},{"path":"exchangeability-and-experiments.html","id":"exchangeability-and-conditional-randomization","chapter":"2 Exchangeability and experiments","heading":"2.3 Exchangeability and conditional randomization","text":"Sep 5. Slides. class, read Hernán Robins 2020 Chapter 2.2 & 2.3.talk experiments good: setting key identification assumption (exchangeability) holds design. discuss exchangeability important: allows us link causal quantities observable data. discuss exchangeability simple randomized experiments experiments conditionally randomized treatment assignment probabilities functions pre-existing characteristics.","code":""},{"path":"exchangeability-and-experiments.html","id":"standardization-and-effect-measures","chapter":"2 Exchangeability and experiments","heading":"2.4 Standardization and effect measures","text":"Sep 10. Slides. class, read Hernán Robins 2020 Chapter 2.4.Stratification allows us estimate average causal effect within subpopulation, strata, also known conditional average treatment effect. Standardization important statistical procedure allows us estimate population average treatment effect taking weighted average subpopulations.conditionally randomized experiments, standardization essential yield unbiased estimates population average causal effect. strategy also essential observational studies discuss soon.","code":""},{"path":"exchangeability-and-experiments.html","id":"lab-analyze-a-randomized-experiment","chapter":"2 Exchangeability and experiments","heading":"2.5 Lab: Analyze a randomized experiment","text":"Sep 11. Slides.lab use R analyze data randomized experiment households randomized receive mailers encouraging vote, researchers examined effects voter turnout (Gerber, Green, & Larimer 2008). Download R Markdown file .","code":""},{"path":"exchangeability-and-experiments.html","id":"inverse-probability-weighting","chapter":"2 Exchangeability and experiments","heading":"2.6 Inverse probability weighting","text":"Sep 12. Slides. class, read Hernán Robins 2020 Chapters 3.1 3.2.class introduce inverse probability weighting approach estimate average causal effects conditional exchangeability holds.","code":""},{"path":"consistency-and-positivity.html","id":"consistency-and-positivity","chapter":"3 Consistency and positivity","heading":"3 Consistency and positivity","text":"","code":""},{"path":"consistency-and-positivity.html","id":"exchangeability-in-observational-studies","chapter":"3 Consistency and positivity","heading":"3.1 Exchangeability in Observational Studies","text":"Sep 17. Slides. class, read Hernán Robins 2020 Chapter 3.4-3.5. Optionally, read Hernán 2016.makes causal inference observational data challenging? making treatment precise important? topics ’ll discuss lecture!","code":""},{"path":"consistency-and-positivity.html","id":"lab-exchangeability-and-consistency-review","chapter":"3 Consistency and positivity","heading":"3.2 Lab: Exchangeability and Consistency Review","text":"Sep 18 Slides.go activity really hone concepts exchangeability consistency. Download class assignment .","code":""},{"path":"consistency-and-positivity.html","id":"asking-good-causal-questions","chapter":"3 Consistency and positivity","heading":"3.3 Asking good causal questions","text":"Sep 19. Slides. class, read Hernán Robins 2020 Chapter 3.3 & 3.6.Good causal questions structured credibility strong two key assumptions: positivity consistency.Positivity. Every population subgroup receives every treatment value non-zero probabilityConsistency. Potential outcomes \\(Y^\\) well-defined linked observable data","code":""},{"path":"directed-acyclic-graphs.html","id":"directed-acyclic-graphs","chapter":"4 Directed Acyclic Graphs","heading":"4 Directed Acyclic Graphs","text":"","code":""},{"path":"directed-acyclic-graphs.html","id":"marginal-independence","chapter":"4 Directed Acyclic Graphs","heading":"4.1 Marginal independence","text":"Sep 24. Slides. class, read Hernán Robins 2020 Chapter 6.1 6.2. historical reference, optionally see Greenland, Pearl, Robins 1999.class introduce key ideas DAGs.Directed Acyclic Graph. series nodes representing variables, connected directed edges representing direct causal effects. node edge least two nodes must drawn graph.Path. path sequence edges connecting two nodesCollider along path. node \\(B\\) directed edges collide: \\(\\rightarrow B \\leftarrow C\\). collider blocks path.DAGs help us know variables \\(\\) \\(B\\) statistically related\\(\\) \\(B\\) marginally dependent exists unblocked path connecting \\(\\) \\(B\\) marginally independent paths connecting blocked","code":""},{"path":"directed-acyclic-graphs.html","id":"lab-project-overview","chapter":"4 Directed Acyclic Graphs","heading":"4.2 Lab: Project Overview","text":"Sep 25. Slides.can find information course project . discussion, walk project overview instructions Task 1. Task 1 due Thursday, October 3rd.","code":""},{"path":"directed-acyclic-graphs.html","id":"conditional-independence","chapter":"4 Directed Acyclic Graphs","heading":"4.3 Conditional independence","text":"Sep 26. Slides. class, read Hernán Robins 2020 Chapter 6.3 6.4, especially Fine Point 6.1 page abbreviation.Often, want condition set variables \\(\\vec{L}\\) conditional exchangeability holds.path blocked node path blocked. every node path open, entire path openA non-collider blocked conditioned , otherwise openA collider open descendants conditioned . Otherwise blocked","code":""},{"path":"directed-acyclic-graphs.html","id":"sufficient-adjustment-sets","chapter":"4 Directed Acyclic Graphs","heading":"4.4 Sufficient adjustment sets","text":"Oct 1. Slides. class, read Hernán Robins 2020 7.1–7.4.marginal exchangeability hold, may able condition set variables \\(\\vec{L}\\) conditional exchangeability holds. can accomplish blocking non-causal paths \\(\\) \\(Y\\). set called sufficient adjustment set. find sufficient adjustment set, use backdoor criterion:set \\(L\\) blocks backdoor pathsThe set \\(L\\) contain descendants \\(\\)","code":""},{"path":"directed-acyclic-graphs.html","id":"lab-dags-review","chapter":"4 Directed Acyclic Graphs","heading":"4.5 Lab: DAGs Review","text":"Oct 2 Slides.lab, ’re reviewing DAG basics identifying paths determining whether path open closed.","code":""},{"path":"statistical-modeling.html","id":"statistical-modeling","chapter":"5 Statistical modeling","heading":"5 Statistical modeling","text":"","code":""},{"path":"statistical-modeling.html","id":"why-model","chapter":"5 Statistical modeling","heading":"5.1 Why model?","text":"Oct 3. Slides. class, read Hernán Robins 2020 Chapter 11.point, used statistical models. Instead, havetaken means within subgroupsthen aggregated subgroupsToday discuss strategy breaks many confounding variables, thus many subgroups.","code":""},{"path":"statistical-modeling.html","id":"parametric-modeling","chapter":"5 Statistical modeling","heading":"5.2 Parametric Modeling","text":"Oct 8. Slides. Reading: class, read Hernán Robins 2020 Chapter 12.1–12.5.Today introduce estimate causal effects directly modeling outcome based covariates. addition, discuss model probability treatment, also known propensity score.","code":""},{"path":"statistical-modeling.html","id":"lab-parametric-g-formula","chapter":"5 Statistical modeling","heading":"5.3 Lab: Parametric g-formula","text":"Oct 9. Slides.Download corresponding R Markdown file .discussion, make sure download data ’ll using. See Ed Discussion post detail.class, read Hernán Robins 2020 Chapter 13 15.1.Solutions lab exercise .","code":""},{"path":"statistical-modeling.html","id":"matching","chapter":"5 Statistical modeling","heading":"5.4 Matching","text":"Oct 10. Slides. class, read Hernán Robins 2020 Chapter 15.2.Today introduce idea matching allows us estimate average treatment treated.","code":""},{"path":"statistical-modeling.html","id":"lab-matching-in-r","chapter":"5 Statistical modeling","heading":"5.5 Lab: Matching in R","text":"Oct 16. Slides.lab, ’ll go distance metrics matching multiple covariates. ’ll also go examples using R matching estimate causal effects.Download R Markdown. file today’s lab; view knit file . Submit work Canvas leave discussion! SolutionsIf finish exact matching exercise early, work R Markdown Notebook examples (download .Rmd file ). also video walking examples canvas.","code":""},{"path":"statistical-modeling.html","id":"discussion-of-matching","chapter":"5 Statistical modeling","heading":"5.6 Discussion of matching","text":"Oct 17 Slides.’ll wrap discussion matching introducing propensity score matching coarsened exact matching. ’ll also discuss combining regression matching methods estimate causal effects.","code":""},{"path":"statistical-modeling.html","id":"worked-example-of-statistical-modeling","chapter":"5 Statistical modeling","heading":"5.7 Worked example of statistical modeling","text":"section presents math code worked example statistical\nmodeling, includingoutcome modelingmatchingWe use methods answer causal question:degree completing 4-year college degree age 25\nincrease probability college-educated spouse \nresidential partner age 35?theory motivates question follows. College causes\npeople personally higher earnings. also affects \nprobability someone lives high-earning partner. college\ndegree thus affects household incomes effect \nindividual earnings also effect individuals pool\nhouseholds.","code":""},{"path":"statistical-modeling.html","id":"data-access","chapter":"5 Statistical modeling","heading":"5.7.1 Data access","text":"prepared data study question. need \ndownload data directly data distributor National\nLongitudinal Survey Youth 1997\ncohort. .First, download two supporting files us:nlsy97.NLSY97\ntagset file containing variable namesprepare_nlsy97.R\nR script prepare dataput files directory workNext, download data NLSY97.register surveylog NLS Investigatorchoose NLSY97 studyupload tagset downloaded usdownload data. , change file name default\nnlsy97unzip file. Find nlsy97.dat unzipped folderdrag file folder workIn R console, run line code belowAfter following steps, data working directory! \ncan load data quickly future typingWhy can’t just send data? Two reasons!NLSY97 created procedure register users encourage\nethical use data researchBy registering, help Bureau Labor Statistics know \nmany people using data, helpful demonstrating\nwide use data useful securing funding \nfuture surveys!","code":"\ninstall.packages(\"tidyverse\") # if you do not have it yet\ninstall.packages(\"Amelia\")    # if you do not have it yet\nsource(\"prepare_nlsy97.R\")\nlibrary(tidyverse)\nd <- readRDS(\"d.RDS\")"},{"path":"statistical-modeling.html","id":"worked-example-outcome-modeling","chapter":"5 Statistical modeling","heading":"5.7.2 Worked example: Outcome modeling","text":"Outcome modeling based following identification result, \ntranslates causal quantity statistical estimand \ninvolve counterfactual outcomes.\\[\\begin{aligned}\n&E(Y^) \\\\\n&\\text{law iterated expectation,}\\\\\n&= E(E(Y^\\mid \\vec{L})) \\\\\n&\\text{exchangeability,}\\\\\n&= E(E(Y^\\mid \\vec{L}, = )) \\\\\n&\\text{consistency,}\\\\\n&= E(E(Y\\mid \\vec{L}, = ))\n\\end{aligned}\\]use sample mean estimator outer expectation, \ndiscuss several estimators inner conditional\nexpectation. \\[\\begin{aligned}\n\\hat{E}(Y^) &= \\frac{1}{n}\\sum_{=1}^n \\hat{E}(Y\\mid \\vec{L} = \\vec\\ell_i, = )\n\\end{aligned}\\]Now intuition: estimator tells tofor unit \\(\\) sample, estimate expected outcome among\npeople look like unit (\\(\\vec{L} = \\vec\\ell_i\\)) got\ntreatment value interest \\(= \\).take average estimate unitsA nonparametric strategy step (1) literally estimate \nexpected outcome taking sample average among units \nidentical unit \\(\\) along confounders \\(\\vec{L}\\). \nmany confounding variables units, might zero\ncases! parametric strategy assume model outcome,\n\\[E(Y\\mid \\vec{L} = \\vec\\ell, = ) = \\alpha + \\beta + \\vec\\ell'\\vec\\gamma\\]\nparameters \\(\\{\\alpha,\\beta,\\vec\\gamma\\}\\) estimated \nOrdinary Least Squares regression.Note: model like! example, add\ninteractions use logistic regression instead.model, want predict expected outcome \ntreatment value \\(\\) every unit unit’s observed confounder\nvalues.\\[\\hat{E}(Y\\mid \\vec{L} = \\vec\\ell_i, = ) = \\hat\\alpha + \\hat\\beta + \\vec\\ell'_i\\hat{\\vec\\gamma}\\]\ncode, wouldmodify every unit’s treatment value \\(\\)\nintuition: actually intervened treatment \nworld, value treatment change values \n\\(\\vec{L}\\) remain unchanged\nintuition: actually intervened treatment \nworld, value treatment change values \n\\(\\vec{L}\\) remain unchangedpredict outcome every unitaverage sampleIn code , estimated three causal quantities\\(E(Y^1)\\), probability respondent \ncollege-educated spouse partner intervened assign \ncollege degree \\(E(Y^0)\\), probability respondent \ncollege-educated spouse partner intervened assign \ncollege degree \\(E(Y^1-Y^0)\\), average causal effect college degree \nspouse partner college degree","code":"\noutcome_model <- lm(y ~ a + sex + race + \n                      mom_educ + dad_educ + \n                      log_parent_income +\n                      log_parent_wealth +\n                      test_percentile,\n                    data = d)\n# Make data where all are treated\nd_if_treated <- d %>%\n  mutate(a = \"college\")\n# Make data where all are untreated\nd_if_untreated <- d %>%\n  mutate(a = \"no_college\")\npredicted_outcome <- d %>%\n  mutate(yhat1 = predict(outcome_model,\n                         newdata = d_if_treated),\n         yhat0 = predict(outcome_model,\n                         newdata = d_if_untreated))\npredicted_outcome %>%\n  summarize(average_yhat1 = mean(yhat1),\n            average_yhat0 = mean(yhat0),\n            average_effect = mean(yhat1 - yhat0))## # A tibble: 1 × 3\n##   average_yhat1 average_yhat0 average_effect\n##           <dbl>         <dbl>          <dbl>\n## 1         0.427         0.164          0.263"},{"path":"statistical-modeling.html","id":"worked-example-matching","chapter":"5 Statistical modeling","heading":"5.7.3 Worked example: Matching","text":"also estimate matching. Matching can interpreted \noutcome modeling strategy conditional mean outcome\n\\(E(Y\\mid\\vec{} = , \\vec{L} = \\vec\\ell_i)\\) estimated mean\noutcome among set units whose confounder values similar \nunit \\(\\) received treatment value \\(\\) interest.One way defining ``similar’’ propensity score matching: find\nunits whose probability treatment given confounders close \nprobability unit \\(\\). example, code ,estimates probability college completion using logistic\nregressionfor person finished college, matches non-college\ngraduate whose probability completing college similarThe variable matched$weights one element person \ndataset. indicates many times person appears matched\nsample. are1,533 college graduates weight 11,533 matched non-graduates weight 14,705 non-matched non-graudates weight 0Within matched data, non-graduates graduates similar\nalong confounding variables. estimatethe probability college educated spouse among college\ngraduates mean among peoplethe probability persisted \nfinished college, mean among matched counterpartsAn even better estimator might use linear regression adjust \ndifferences within matched pairs exist matches \nidentical., predict potential outcomes matched fit report \nexpected outcome among college graduates factual treatment\nunderThese results suggest completing college increases probability\ncollege-educated spouse partner 27 percentage\npoints.","code":"\nlibrary(MatchIt)\nmatched <- matchit(a == \"college\" ~ sex + race + mom_educ + \n                     dad_educ + log_parent_income + \n                     log_parent_wealth + test_percentile,\n                   method = \"nearest\", \n                   distance = \"glm\",\n                   estimand = \"ATT\",\n                   data = d)\ntable(d$a,matched$weights)##             \n##                 0    1\n##   college       0 1533\n##   no_college 4705 1533\nd %>%\n  mutate(weight = matched$weights) %>%\n  group_by(a) %>%\n  summarize(p_spouse_college = weighted.mean(y, w = weight))## # A tibble: 2 × 2\n##   a          p_spouse_college\n##   <chr>                 <dbl>\n## 1 college               0.528\n## 2 no_college            0.232\nmatched_fit <- lm(y ~ a*(sex + race + mom_educ + \n                           dad_educ + log_parent_income + \n                           log_parent_wealth + test_percentile), \n                  data = d, \n                  weights = matched$weights)\n# Create data frames for prediction\ncollege_grads_factual <- d %>%\n  filter(a == \"college\")\ncollege_grads_counterfactual <- college_grads_factual %>%\n  mutate(a = \"no_college\")\n\n# Predict outcomes from the model\ncollege_grads_factual %>%\n  mutate(yhat_college = predict(matched_fit, \n                                newdata = college_grads_factual),\n         yhat_no_college = predict(matched_fit,\n                                   newdata = college_grads_counterfactual)) %>%\n  # Report estimated average outcomes\n  select(starts_with(\"yhat\")) %>%\n  summarize_all(.funs = mean) %>%\n  # Estimate the causal effect\n  mutate(effect = yhat_college - yhat_no_college)## # A tibble: 1 × 3\n##   yhat_college yhat_no_college effect\n##          <dbl>           <dbl>  <dbl>\n## 1        0.528           0.259  0.269"},{"path":"instrumental-variables.html","id":"instrumental-variables","chapter":"6 Instrumental variables","heading":"6 Instrumental variables","text":"","code":""},{"path":"instrumental-variables.html","id":"experimental-settings","chapter":"6 Instrumental variables","heading":"6.1 Experimental settings","text":"Oct 22. Slides.instrumental variable (IV) identification strategy applies treatment effect \\(\\) \\(Y\\) confounded unobserved variables (\\(U\\)), instrument \\(Z\\) creates random unconfounded variation \\(\\).clean setting IV randomized experiments non-compliance: experimenter randomizes assigned treatment (\\(Z\\)) actual treatment (\\(\\)) may unequal \\(Z\\) units follow assignment. first class discuss setting.","code":""},{"path":"instrumental-variables.html","id":"lab-instrumental-variable-analysis-in-code","chapter":"6 Instrumental variables","heading":"6.2 Lab: Instrumental Variable analysis in Code","text":"lab implement instrumental variables estimators R.October 23 Slides. Download \nR Markdown file .\nSolutions lab exercise .","code":""},{"path":"instrumental-variables.html","id":"observational-settings","chapter":"6 Instrumental variables","heading":"6.3 Observational settings","text":"Oct 24 Slides. class, read Hernán Robins 2020 Chapter 16.Thursday, move IV analysis observational settings. focus casual assumptions required IV. assumptions often hold design experiments non-compliance. observational settings, can doubtful.","code":""},{"path":"regression-discontinuity.html","id":"regression-discontinuity","chapter":"7 Regression discontinuity","heading":"7 Regression discontinuity","text":"","code":""},{"path":"regression-discontinuity.html","id":"introduction","chapter":"7 Regression discontinuity","heading":"7.1 Introduction","text":"Oct 29. Slides. class, read Huntington Klein 2021 Chapter 20, sections 20.1 20.3.4. Slides annotations lecture: Annotated Slides.settings, treatment assigned based solely value continuous variable. situations, can identify local ATE without many additional assumptions. Today introduce works using regression discontinuity designs.","code":""},{"path":"regression-discontinuity.html","id":"lab-regression-discontinuity---bandwidth-and-examples","chapter":"7 Regression discontinuity","heading":"7.2 Lab: Regression Discontinuity - Bandwidth and Examples","text":"Oct 30 Slides. Download today’s .Rmd document . lab, read Huntington Klein 2021 Chapter 20, section 20.2.1.’ll discuss bandwidth selection triangular weighting. ’ll also apply regression discontinuity concrete example give chance try .","code":""},{"path":"regression-discontinuity.html","id":"discussion","chapter":"7 Regression discontinuity","heading":"7.3 Discussion","text":"Oct 31. Slides. class, read Huntington Klein 2021 Chapter 20, sections 20.2.2. 20.2.4. R Code Example: Fuzzy RDDWe’ll continue discussion regression discontinuity designs discussing fuzzy RDD validation checks RDD.","code":""},{"path":"difference-in-differences.html","id":"difference-in-differences","chapter":"8 Difference in differences","heading":"8 Difference in differences","text":"","code":""},{"path":"difference-in-differences.html","id":"introduction-1","chapter":"8 Difference in differences","heading":"8.1 Introduction","text":"Nov 5. Slides. reading required, reference see Card & Krueger 1994Today study effect policy change New Jersey, drawing evidence neighboring state Pennsylvania.Difference difference identification strategy used one units become treated time point others . believe assumption parallel trends, can use change time never-treated units estimate change time experienced units become treated, counterfactual world become treated.","code":""},{"path":"difference-in-differences.html","id":"lab","chapter":"8 Difference in differences","heading":"8.2 Lab","text":"Nov 6 Slides. Download \nR Markdown file . can find knitted version .lab, implement difference difference estimator specific setting. example comes Malesky, Nguyen, & Tran 2014 closely follow re-analysis data Egami & Yamauchi 2023.","code":""},{"path":"difference-in-differences.html","id":"extensions-of-did","chapter":"8 Difference in differences","heading":"8.3 Extensions of DID","text":"Nov 7. Slides. reading required, reference see Egami & Yamauchi 2023\nSlides annotations lecture: Annotated Slides.know parallel trends assumption holds? hold? class discusses recent extensions framework.","code":""},{"path":"synthetic-control.html","id":"synthetic-control","chapter":"9 Synthetic control","heading":"9 Synthetic control","text":"","code":""},{"path":"synthetic-control.html","id":"introduction-2","chapter":"9 Synthetic control","heading":"9.1 Introduction","text":"Nov 12 Slides.Today introduce idea synthetic control. class able :Explain intuition behind synthetic controlUnderstand synthetic control relates causal inference methods","code":""},{"path":"synthetic-control.html","id":"lab-1","chapter":"9 Synthetic control","heading":"9.2 Lab","text":"Nov 13 SlidesWe review main idea behind synthetic control well compare contrast synthetic control matching difference--differences. also dig deeper select weights synthetic control review worked example assess performance method.","code":""},{"path":"synthetic-control.html","id":"discussion-1","chapter":"9 Synthetic control","heading":"9.3 Discussion","text":"Nov 14 Slides.. Read Chapter 10 Causal Inference Mixtape Cunningham 2021After class able :Understand conduct hypothesis test estimates\nsynthtic control analysisReason interference affect estimates synthetic control analysis","code":""},{"path":"current-research.html","id":"current-research","chapter":"10 Current research","heading":"10 Current research","text":"","code":""},{"path":"current-research.html","id":"research-discussion-mayleen","chapter":"10 Current research","heading":"10.1 Research discussion: Mayleen","text":"Dec 3 SlidesToday discussing interference, challenges brings causal inference, proposed solutions.","code":""},{"path":"course-recap.html","id":"course-recap","chapter":"11 Course recap","heading":"11 Course recap","text":"Dec 5 SlidesWe review learned semester!","code":""},{"path":"discussion-2.-stats-review.html","id":"discussion-2.-stats-review","chapter":"Discussion 2. Stats review","heading":"Discussion 2. Stats review","text":"SlidesTo execute simulations locally, download .Rmd ","code":"\nlibrary(ggplot2)\nlibrary(ggmosaic)\nlibrary(tibble)"},{"path":"discussion-2.-stats-review.html","id":"sample-expectations-converge-to-population","chapter":"Discussion 2. Stats review","heading":"11.1 Sample expectations converge to population","text":"can generate simulations show sample mean variance converge \npopulation values.","code":"\ntrue_mean <- 2\ntrue_var <- 5\n\nsample_mean_seq <- 1:3000\nsample_means <- vapply(\n  sample_mean_seq,\n  \\(x) mean(rnorm(n = x, mean = true_mean, sd = sqrt(true_var))),\n  numeric(1)\n)\nsample_variances <- vapply(\n  sample_mean_seq,\n  \\(x) {\n    data <- rnorm(n = x, mean = true_mean, sd = sqrt(true_var))\n    sample_mean <- mean(data)\n    sum((data - sample_mean)^2)/length(data)\n  },\n  numeric(1)\n)\n\nmeans <- tibble(\"N\" = sample_mean_seq, \"Sample Mean\" = sample_means)\nvars <- tibble(\"N\" = sample_mean_seq, \"Sample Variance\" = sample_variances)\n\ncolors <- c(\"Sample Mean\" = \"lightblue\", \"Population Mean\" = \"red\")\n\nggplot(means, aes(y = `Sample Mean`, x = N)) +\n  geom_line(color = \"lightblue\") +\n  geom_abline(slope = 0, intercept = true_mean, color = \"red\") +\n  theme_bw()\nggplot(vars, aes(y = `Sample Variance`, x = N)) +\n  geom_line(color = \"lightblue\") +\n  geom_abline(slope = 0, intercept = true_var, color = \"red\") +\n  theme_bw()"},{"path":"discussion-2.-stats-review.html","id":"simulate-conditional-expectations","chapter":"Discussion 2. Stats review","heading":"11.2 Simulate conditional expectations","text":"Simulate conditional expectations within groups differ sample\nmean.","code":"\ngroup1_means <- rnorm(100, mean = 20, sd = 5)\ngroup2_means <- rnorm(100, mean = 30, sd = 5)\ngroup_means <- data.frame(\n  \"Group\" = c(rep(\"Group 1\", 100), rep(\"Group 2\", 100)),\n  \"Values\" = c(group1_means, group2_means),\n  \"x\" = rnorm(200, 5, sd = 3)\n)\nggplot(group_means, aes(x = x, y = Values, color = Group)) +\n  geom_point() +\n  geom_abline(\n    slope = 0,\n    intercept = mean(group_means$Values),\n    show.legend = TRUE,\n    color = \"gray30\"\n  ) +\n  geom_abline(\n    slope = 0,\n    intercept = mean(group_means[group_means$Group == \"Group 1\", ]$Values),\n    show.legend = TRUE,\n    color = \"#F8766D\"\n  ) +\n  geom_abline(\n    slope = 0,\n    intercept = mean(group_means[group_means$Group == \"Group 2\", ]$Values),\n    show.legend = TRUE,\n    color = \"#00BFC4\"\n  ) +\n  theme_bw()"},{"path":"discussion-2.-stats-review.html","id":"show-independence-of-variables---example-of-two-dice-rolling","chapter":"Discussion 2. Stats review","heading":"11.3 Show independence of variables - example of two dice rolling","text":"","code":"\ndice_1 <- sample(1:6, 100000, replace = TRUE)\ndice_2 <- sample(1:6, 100000, replace = TRUE)\ndice <- tibble(\n  \"dice\" = c(rep(\"Die 1\", 100000), rep(\"Die 2\", 100000)),\n  \"value\" = c(dice_1, dice_2)\n)\n\nggplot(data = dice) +\n  geom_mosaic(aes(x = product(dice, value), fill = dice)) +   \n  labs(y=\"\", x=\"Value Rolled\", title = \"Independence of dice roll\") +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5), legend.position = \"none\")"},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"discussion-3.-analyzing-an-experiment-in-r","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"Discussion 3. Analyzing an Experiment in R","text":"Slides","code":""},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"download-.rmd-document","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.4 Download .Rmd Document","text":"Download today’s .Rmd document .","code":""},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"get-out-and-vote-experiment","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.5 Get out and Vote Experiment","text":"lab, explore experiment digs mechanisms\nunderlying people vote. exercise based :Gerber, Alan S., Donald P. Green, Christopher W. Larimer. “Social Pressure Voter Turnout: Evidence Large-scale Field Experiment.” American Political Science Review 102.1 (2008): 33-48.long-standing theory many people\nvote driven social norms (e.g. understanding voting\ncivic duty). theory, dominant theoretical\nexplanation, little empirical backing long time. experiment\nexamines theory asking question:\nextent social norms cause voter turnout?","code":""},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"experimental-design","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.5.1 Experimental Design","text":"order answer question, approximately 80,000 Michigan households\nrandomly assigned treatment control groups, treatment\ngroup randomly assigned one four possible treatment arms. \ntreatment arms varied intensity social pressure conveyed,\ndefined follows:first treatment arm mailed letter simply reminded \nvoting civic duty.second treatment arm mailed letter telling researchers\nstudying voting turnout based public records.third treatment arm mailed letter stating voting turnout\nrevealed members household.fourth treatment arm mailed letter stating voting turnout\nrevealed household neighbors.","code":""},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"analyze-experiment","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6 Analyze Experiment","text":"","code":""},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"necessary-packages","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6.1 Necessary packages","text":"Note: errors probably either don’t dplyr haven\ninstalled.","code":"\nlibrary(dplyr)\nlibrary(haven)"},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"import-data","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6.2 Import data","text":"Alternatively (really want), download data load directly computer. Make sure save data directory RMarkdown file .\ncan can import data :gotv <- read_dta(\"social_pressure.dta\")Run following code get quick peek dataset using function glimpse. returns info number rows/columns, column names, type data column. Notice information year birth yob explicitly age. Also notice treatments labeled numbers 0 4.","code":"\ngotv <- read_dta(\"https://causal3900.github.io/assets/data/social_pressure.dta\")\nglimpse(gotv)"},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"clean-data","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6.3 Clean data","text":"First, let’s construct age variable describing old (number years)\nperson year 2006. yob variable says year person\nborn . , use mutate function, can read .Given person’s year birth, calculate age year 2006? Note can arithmetic operations information dataset. example, two columns col_1 col_2 wanted create third column called col_3 sum two columns, write:mutate(col_3 = col_1 + col_2)code started . Fill appropriate expression age = add column gotv labeled age contains old person 2006.Now, convert treatment variable ’s numeric representation \ncorresponding labels are0: “Control”1: “Hawthorne” (‘researchers viewing records via public data’ treatment arm)2: “Civic Duty” (‘voting civic duty’ treatment arm)3: “Neighbors” (‘voting turnout revealed neighbors’ treatment arm)4: “Self” (‘voting turnout revealed household’ treatment arm), want use function case_when described .\ngeneral syntax case_when(condition ~ output-value)example, condition treatement == 0 output value \"Control\". search every value treatment column equals 0 replace string \"Control\".started code . Decide argument(s) pass inside parantheses case_when().Now, use glimpse see added age variable treatments word instead number labels.","code":"\ngotv <- gotv |>\n  mutate(age = )\ngotv <- gotv |>\n  mutate(treatment = case_when()) \nglimpse(gotv)"},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"balance-table","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6.4 Balance table","text":"Next, ’re going confirm control treatment groups look pretty\nmuch across set covariates, .e. two groups balanced covariates. Specifically means ’re going calculate mean value set covariates across treatment/control\narms, expect pretty much equal randomization worked. related idea exchangeability.exercise, going reproduce table similar Table 1 paper. want table shows mean value following covariates five treatment arms: Household size, Nov 2002, Nov 2000, Aug 2004, Aug 2002, Aug 2000, Female, Age (years). create table 5 rows, one treatment arm, 8 columns, one covariate interest.started code . need :Pass argument group_by() calculate seperate means treatment arm.\nLook documentation group_by function.\nLook documentation group_by function.Pass argument summarise() computes mean covariate covariates seperate treatment arm.\nLook documentation summarise function.\nmay find function across useful well. can use function inside summarise()!\nLook documentation summarise function.may find function across useful well. can use function inside summarise()!Note numbers match exactly Table 1. want notice values column similar across rows.","code":"\ncovariates <- c(\"sex\", \"age\", \"g2000\", \"g2002\", \"p2000\", \"p2002\", \"p2004\", \"hh_size\")\n\ngotv_balance <- gotv |>\n  group_by(...) |>\n  summarise(...)\n\nprint(gotv_balance)"},{"path":"discussion-3.-analyzing-an-experiment-in-r.html","id":"results","chapter":"Discussion 3. Analyzing an Experiment in R","heading":"11.6.5 Results","text":"Finally, let’s replicate final results (Table 2). treatment group, calculate percentage individuals got voted, well total number individuals group! started code . need toPass argument group_by() working treatment arm seperately (!)Pass two arguments summarise() following:\nCreate column titled Percentage_Voting contains percent group voted\nCreate column titled num_of_individuals contains total number people group\nCreate column titled Percentage_Voting contains percent group votedCreate column titled num_of_individuals contains total number people group","code":"\ngotv_results <- gotv |>\n  group_by(...) |>\n  summarise(...)\n\nprint(gotv_results)"},{"path":"discussion-05.-course-project-task-1.html","id":"discussion-05.-course-project-task-1","chapter":"Discussion 05. Course Project: Task 1","heading":"Discussion 05. Course Project: Task 1","text":"discussion today discuss overview course project datasets might use project.Slides","code":""},{"path":"solutions-matching-lab.html","id":"solutions-matching-lab","chapter":"Solutions: Matching Lab","heading":"Solutions: Matching Lab","text":"View original instructions .","code":""},{"path":"solutions-matching-lab.html","id":"data-and-r-libraries","chapter":"Solutions: Matching Lab","heading":"Data and R Libraries","text":"first exercise problem set 4 use lalonde dataset following paper:Dehejia, R. H. Wahba, S. 1999. Causal Effects Nonexperimental Studies: Reevaluating Evaluation Training Programs. Journal American Statistical Association 94(448):1053–1062.paper compares methods observational causal inference recover average causal effect already known randomized experiment. need read paper; just use study’s data illustration. ’ll load data R first code block.learn data, type ?lalonde R console.","code":""},{"path":"solutions-matching-lab.html","id":"example-exact-matching-with-low-dimensional-confounding","chapter":"Solutions: Matching Lab","heading":"2. Example: Exact Matching with low-dimensional confounding","text":"goal estimate effect job training treat future earnings re78 (real earnings 1978), among received job training (average treatment effect treated, ATT).","code":""},{"path":"solutions-matching-lab.html","id":"using-matchit-to-conduct-a-matching","chapter":"Solutions: Matching Lab","heading":"2.1. Using matchit() to conduct a matching","text":"part, assume three variables comprise sufficient adjustment set: race, married, nodegree. use matchit :formula treat ~ race + married + nodegreemethod = \"exact\" conduct exact matching, matches two units identical along race, married, nodegreedata = lalonde since using lalonde dataestimand = \"ATT\" since targeting average treatment effect treated (ATT)use summary() function see many control units many treatment units matched.Question: many control units matched? many treated units? treated control units kept!","code":"\nexact_low <- matchit(treat ~ race + married + nodegree,\n                 data = lalonde,\n                 method = \"exact\",\n                 estimand = \"ATT\")\n# Note: There are multiple correct ways to extract the numbers below\nsummary(exact_low)$nn##                Control Treated\n## All (ESS)     429.0000     185\n## All           429.0000     185\n## Matched (ESS) 111.5254     185\n## Matched       429.0000     185\n## Unmatched       0.0000       0\n## Discarded       0.0000       0"},{"path":"solutions-matching-lab.html","id":"effect-estimate","chapter":"Solutions: Matching Lab","heading":"2.2. Effect estimate","text":", estimate linear regression model using match data 2.1 using lm() function formula re78 ~ treat + race + married + nodegree. pass weights come matching. Notice piece, passed matched data match.data(exact_low). coefficient front variable treat linear regression estimated effect.Question: estimated effect job training earnings?Answer. estimate suggests job training increases future earnings $1309.90.","code":"\nfit <- lm(re78 ~ treat + race + married + nodegree,\n          data = match.data(exact_low),\n          w = weights)\nprint(round(coef(fit)[\"treat\"],2))##  treat \n## 1309.9"},{"path":"solutions-matching-lab.html","id":"assessing-the-match-balance-of-covariates","chapter":"Solutions: Matching Lab","heading":"2.3. Assessing the Match: Balance of Covariates","text":"matching, one thing care balance across covariates. words, want see distributions different covariates treatment control groups. can check well balancing done summary() function.interactions: check interaction terms ? (T F)un: show statistics unmatched data well? (T F)Question: notice means different covariates treated versus control groups?Answer: means !case, basically perfect balance. doesn’t always happen. Depending method parameters use, “bad” matches covariates unbalanced. conduct matching covariate balance doesn’t look good, try another matching procedure!","code":"\nsummary(exact_low, interactions = F, un = F)$sum.matched##            Means Treated Means Control Std. Mean Diff.\n## raceblack     0.84324324    0.84324324    0.000000e+00\n## racehispan    0.05945946    0.05945946    6.938894e-18\n## racewhite     0.09729730    0.09729730    1.387779e-17\n## married       0.18918919    0.18918919    0.000000e+00\n## nodegree      0.70810811    0.70810811    0.000000e+00\n##            Var. Ratio    eCDF Mean     eCDF Max\n## raceblack          NA 0.000000e+00 0.000000e+00\n## racehispan         NA 6.938894e-18 6.938894e-18\n## racewhite          NA 1.387779e-17 1.387779e-17\n## married            NA 0.000000e+00 0.000000e+00\n## nodegree           NA 0.000000e+00 0.000000e+00\n##            Std. Pair Dist.\n## raceblack                0\n## racehispan               0\n## racewhite                0\n## married                  0\n## nodegree                 0"},{"path":"solutions-matching-lab.html","id":"try-it-yourself-exact-matching-with-high-dimensional-confounding","chapter":"Solutions: Matching Lab","heading":"3. Try it Yourself: Exact matching with high-dimensional confounding","text":"use results section Problem Set 4.","code":""},{"path":"solutions-matching-lab.html","id":"using-matchit-to-conduct-a-matching-1","chapter":"Solutions: Matching Lab","heading":"3.1. Using matchit() to conduct a matching","text":"Now suppose adjustment set needs also include 1974 earnings, re74. adjustment set part race, married, nodegree, re74. Repeat exact matching .SolutionQuestion: many control units matched? many treated units? Now 108 429 control units matched, 131 185 treated units.","code":"\nexact_high <- matchit(treat ~ race + married + nodegree + re74,\n                 data = lalonde,\n                 method = \"exact\",\n                 estimand = \"ATT\")\n# Note: There are multiple correct ways to extract the numbers below\nsummary(exact_high)$nn##                 Control Treated\n## All (ESS)     429.00000     185\n## All           429.00000     185\n## Matched (ESS)  48.73116     131\n## Matched       108.00000     131\n## Unmatched     321.00000      54\n## Discarded       0.00000       0"},{"path":"solutions-matching-lab.html","id":"assessing-the-match-examining-matched-units","chapter":"Solutions: Matching Lab","heading":"3.2. Assessing the Match: Examining matched units","text":"Look re74 values full data among matched units.one way :Use select() function get re74 column full data. Pass summary() function look descriptive statistics re74 values full data.Use select() function get re74 column matched data. Pass summary() function look descriptive statistics re74 values full data. can get matched data using match.data function.Examples using summary function .Examples using select() function hereSolutionFull data:Matched data:Explain happened: notice? different values re74 full data versus matched data? Explain happened happened. Briefly interpret result 3.2: drawback using exact matching setting?","code":"\nsummary(\n  lalonde %>%\n    select(re74)\n)##       re74      \n##  Min.   :    0  \n##  1st Qu.:    0  \n##  Median : 1042  \n##  Mean   : 4558  \n##  3rd Qu.: 7888  \n##  Max.   :35040\nmatched_data <- match.data(exact_high)\nsummary(\n  matched_data %>%\n    select(re74)\n)##       re74  \n##  Min.   :0  \n##  1st Qu.:0  \n##  Median :0  \n##  Mean   :0  \n##  3rd Qu.:0  \n##  Max.   :0"},{"path":"discussion-10-rdd-lab-solutions.html","id":"discussion-10-rdd-lab-solutions","chapter":"Discussion 10: RDD Lab Solutions","heading":"Discussion 10: RDD Lab Solutions","text":"Download discussion slides RMarkdown File . may need copy paste .Rmd file.goal today’s activity interact regression discontinuity real-world example using R. first section conceptual, help understand particular application. Afterwards, mix conceptual coding questions. coding already done instead ask explore code changing variables.","code":""},{"path":"discussion-10-rdd-lab-solutions.html","id":"background-an-application-to-party-advantages-in-the-u.s.-senate","chapter":"Discussion 10: RDD Lab Solutions","heading":"1. Background: An Application to Party Advantages in the U.S. Senate","text":"Let’s apply regression discontinuity analysis data. example follows analysis ``Randomization Inference Regression Discontinuity Design: Application Party Advantages U.S. Senate’’ Cattaneo, Frandsen, Titiunik (2015) replication file.Political scientists interested effect incumbent (currently elected politician) share votes election. current public official means increased name recognition, fundraising opportunities, etc. hand, incumbent means can get blamed bad things happened term. Elections also give natural setting cutoff: win 49.9% votes, ’re luck… win 50.1% votes ’ve won whole election!data analyze considers US senators. state US two senators 6 year terms, election two senators alternates every 3 years. instance, two senate seats: B. 2000 senate seat undergoes election, 2003 senate seat B undergoes election senate seat continues, 2006 senate seat undergoes election senate seat B continues , etc.Causal question: incumbent affect vote share next time run office?Treatment: incumbent (words, office)Outcome: Vote share next election (.e. percentage votes get?)Running variable: Margin victory (much win last election)Cutoff: 0 (win, .e. become incumbent, margin victory greater 0; otherwise, lost!)","code":""},{"path":"discussion-10-rdd-lab-solutions.html","id":"check-your-understanding","chapter":"Discussion 10: RDD Lab Solutions","heading":"1.1 Check Your Understanding","text":"Question: words, explain might use regression discontinuity provide answer question.Answer: Using data senators just barely won just barely lost election, can use regression discontinuity compute effect office outcome next election. words, can answer question “effect just barely winning just barely losing election outcome next election?” Critically, estimate applies senators just barely won just barely lost, generalize senators without assumptions.","code":""},{"path":"discussion-10-rdd-lab-solutions.html","id":"data","chapter":"Discussion 10: RDD Lab Solutions","heading":"2. Data","text":"section, run code block read comments inside code block. following code installs loads libraries R, reads data online fine, finally prints first rows data table.column names (variables) mean:demmv democratic margin victory current senate election (.e., democratic percentage - next closest percentage)\nvalue just 0 indicates close victory, value just 0 indicates close loss\nvalue just 0 indicates close victory, value just 0 indicates close lossdemovoteshlag1 demovoteshlag2 indicates vote share 1 2 election cycles ago, respectivelydemovoteshfor1 demovoteshfor2 indicates vote share 1 2 elections cycles future, respectively","code":"\n# Lines like this (starting with a hashtag) are called comments\n# Comments are meant to help explain what is going on\n# Comments are not always necessary, but can be helpful\n\n# Below, we create a function that loads in libraries, but first checks if it is installed\n# The piece of code below is not necessary, but it makes loading libraries more convenient \ninstall <- function(package) {\n  if (!require(package, quietly = TRUE, character.only = TRUE)) {\n    install.packages(package, repos = \"http://cran.us.r-project.org\", type = \"binary\")\n    library(package, character.only = TRUE)\n  }\n}\n\n# install and load some libraries using the function created above\ninstall(\"ggplot2\")\ninstall(\"lpdensity\")\ninstall(\"rddensity\")\ninstall(\"rdrobust\")\ninstall(\"rdlocrand\")\n\n# read in the datafile\ndata <- read.csv(\"https://raw.githubusercontent.com/rdpackages-replication/CIT_2020_CUP/master/CIT_2020_CUP_senate.csv\")\n\n# the head function shows us the first few rows of our data\nhead(data)##         state year dopen population presdemvoteshlag1\n## 1 Connecticut 1914     0    1233000          39.15937\n## 2 Connecticut 1916     0    1294000          39.15937\n## 3 Connecticut 1922     0    1431000          33.02737\n## 4 Connecticut 1926     0    1531000          27.52570\n## 5 Connecticut 1928     1    1577000          27.52570\n## 6 Connecticut 1932     0    1637000          45.57480\n##         demmv demvoteshlag1 demvoteshlag2 demvoteshfor1\n## 1  -7.6885610            NA            NA      46.23941\n## 2  -3.9237082      42.07694            NA      36.09757\n## 3  -6.8686604      36.09757      46.23941      35.64121\n## 4 -27.6680560      45.46875      36.09757      45.59821\n## 5  -8.2569685      35.64121      45.46875      48.47606\n## 6   0.7324815      45.59821      35.64121      51.74687\n##   demvoteshfor2 demwinprv1 demwinprv2 dmidterm dpresdem\n## 1      36.09757         NA         NA        1        1\n## 2      45.46875          0         NA        0        1\n## 3      45.59821          0          0        1        0\n## 4      48.47606          0          0        1        0\n## 5      51.74687          0          0        0        0\n## 6      39.80264          0          0        0        0"},{"path":"discussion-10-rdd-lab-solutions.html","id":"rdd-in-r","chapter":"Discussion 10: RDD Lab Solutions","heading":"3. RDD in R","text":"considering whether incumbent affects vote share next election. Thus, outcome interest demvoteshfor2 next time seat goes election 2 cycles future. running variable demmv.Optional: Explore documentation function rdplot() Read description arguments. arguments (y, x, nbins, p, col.lines, etc) function mean? optional? default values?","code":"\n# Save the column \"demvoteshfor2\" from data into a variable called \"outcome\"\noutcome <- data$demvoteshfor2\n\n# Save the column \"demmv\" from data into a variable called \"running_variable\"\nrunning_variable <- data$demmv\n\n# plot the data\nrdplot(y = outcome, x =  running_variable, nbins = c(1000, 1000), \n       p = 0, col.lines = \"red\", col.dots = \"lightgray\", \n       title = \"Incumbency Advantage\", y.lim = c(0,100), \n       x.label = \"Dem Margin of Victory\", y.label = \"Dem Vote Share in next election\")"},{"path":"discussion-10-rdd-lab-solutions.html","id":"is-there-a-discontinuity","chapter":"Discussion 10: RDD Lab Solutions","heading":"3.1 Is there a discontinuity?","text":"Question: code , compare happens run code \\(p=0\\) versus \\(p=1\\) versus \\(p=2\\). , look p function rdplot . currently set p = 0 run code, give results p = 0. , can change value p re-run code. changes? discontinuity (jump) cutoff?Answer: Changing value p changes degree polynomial assuming data. increase p, curves left right cutoff seem possibly fit data little better. However, may indicate overfitting. instances, clear jump cutoff.","code":""},{"path":"discussion-10-rdd-lab-solutions.html","id":"estimating-the-causal-effect-using-rdrobust","chapter":"Discussion 10: RDD Lab Solutions","heading":"3.2 Estimating the causal effect using rdrobust","text":"Getting estimates aren’t difficult ’ve selected bandwidth, selecting good bandwidth can tricky getting standard errors estimate also difficult. R package rdrobust selects bandwidth, estimates causal effect quantities, give standard errors just couple lines code.rdrobust, syntax rdrobust(y, x, kernel, p, h) y outcome, x running variable, kernel says types weights use, p says degree model (e.g. p = 1 means linear model), h bandwidth.","code":"\n# uniform kernel with bandwidth 10 and a linear (degree 1) model\nout <- rdrobust(outcome, running_variable, kernel = 'uniform',  p = 1, h = 10)\n\n# print the results\nsummary(out)## Sharp RD estimates using local polynomial regression.\n## \n## Number of Obs.                 1297\n## BW type                      Manual\n## Kernel                      Uniform\n## VCE method                       NN\n## \n## Number of Obs.                  595          702\n## Eff. Number of Obs.             245          206\n## Order est. (p)                    1            1\n## Order bias  (q)                   2            2\n## BW est. (h)                  10.000       10.000\n## BW bias (b)                  10.000       10.000\n## rho (h/b)                     1.000        1.000\n## Unique Obs.                     595          702\n## \n## =====================================================================\n##                    Point    Robust Inference\n##                 Estimate         z     P>|z|      [ 95% C.I. ]       \n## ---------------------------------------------------------------------\n##      RD Effect     6.899     3.891     0.000     [5.156 , 15.624]    \n## ====================================================================="},{"path":"discussion-10-rdd-lab-solutions.html","id":"questions","chapter":"Discussion 10: RDD Lab Solutions","heading":"3.2.1 Questions","text":"Question: mathematical notation words, describe causal effect estimated. estimated value?Answer: estimated value 6.899. estimating local average treatment effect. example, average treatment effect incumbent vote share group senators just barely won just barely lost (senators around cutoff).","code":""},{"path":"discussion-10-rdd-lab-solutions.html","id":"try-coding-on-your-own","chapter":"Discussion 10: RDD Lab Solutions","heading":"4. Try coding on your own","text":"next piece, question “sitting senator party, effect vote share?” words, democrat (resp, republican) senator, effect senator also democrat (resp, republican) share votes run office? Recall competing senator, elections every 3 years alternate senators.Now try estimate causal effect senator election democrat democratic vote share senator election. case, outcome interest demvoteshfor1 since interested immediately following election. running variable still margin victory demmn. ’ve plotted data .task use rdrobust() get estimate LATE specifying kernel, model degree (p) bandwidth size (h). Can explain ? Can explain quantity estimated?Question: estimate change change value kernel (see happens set ‘uniform’ versus ‘triangular’)? change value p? happens change h remove completely? standard errors change? see relate bias variance?","code":"\noutcome_2 <- data$demvoteshfor1\nrunning_variable_2 <- data$demmv\n\n# plot the data\n# Set p = 0 for a straight line (i.e., regression with X^p)\nrdplot(y = outcome_2, x =  running_variable_2, nbins = c(1000, 1000), p = 0, col.lines = \"red\", col.dots = \"lightgray\", title = \"Incumbency Advantage\", y.lim = c(0,100), x.label = \"Dem Margin of Victory\", y.label = \"Dem Vote Share in next election\")\n# Your code goes here"},{"path":"discussion-11-did-lab.html","id":"discussion-11-did-lab","chapter":"Discussion 11: DiD Lab","heading":"Discussion 11: DiD Lab","text":"Nov 6 Slides. discussion section. Download R Markdown file .","code":""},{"path":"discussion-11-did-lab.html","id":"empirical-application-how-the-abolition-of-elected-councils-affects-local-public-services-in-vietnam","chapter":"Discussion 11: DiD Lab","heading":"11.7 Empirical Application: How the Abolition of Elected Councils Affects Local Public Services in Vietnam","text":"Refer Tuesday’s lecture (slides recording) background experiment. ’s link paper original experiment link paper re-analyzed experiment, ’re basing lab .","code":""},{"path":"discussion-11-did-lab.html","id":"download-the-data","chapter":"Discussion 11: DiD Lab","heading":"11.7.1 Download the data","text":"need section run code block.","code":"\n# Recall that lines starting with hashtags are called comments\n\n# The next few lines a code create a function called install that installs and loads a package/library\ninstall <- function(package) {\n  if (!require(package, quietly = TRUE, character.only = TRUE)) {\n    install.packages(package, repos = \"http://cran.us.r-project.org\", type = \"binary\")\n    library(package, character.only = TRUE)\n  }\n}\n\n# We are using the function created above to install and load some libraries\ninstall(\"cowplot\")\ninstall(\"dplyr\")## \n## Attaching package: 'dplyr'## The following objects are masked from 'package:stats':\n## \n##     filter, lag## The following objects are masked from 'package:base':\n## \n##     intersect, setdiff, setequal, union\ninstall(\"tidyverse\")## ── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──\n## ✔ forcats   1.0.0     ✔ readr     2.1.5\n## ✔ ggplot2   3.5.2     ✔ stringr   1.5.1\n## ✔ lubridate 1.9.4     ✔ tibble    3.3.0\n## ✔ purrr     1.0.4     ✔ tidyr     1.3.1## ── Conflicts ────────────────────── tidyverse_conflicts() ──\n## ✖ dplyr::filter()    masks stats::filter()\n## ✖ dplyr::lag()       masks stats::lag()\n## ✖ lubridate::stamp() masks cowplot::stamp()\n## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n# Read in the raw data file\nmalesky2014 <- read_csv(\"https://github.com/causal3900/causal3900.github.io/raw/main/assets/data/malesky2014.csv\")## Rows: 6265 Columns: 42\n## ── Column specification ────────────────────────────────────\n## Delimiter: \",\"\n## dbl (42): goodroadv, transport, pro3, tapwater, roadv, r...\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n# some data cleaning (drop rows with missing values in particular columns)\nmalesky2014 <- drop_na(malesky2014, lnarea, lnpopden, city) "},{"path":"discussion-11-did-lab.html","id":"about-the-data","chapter":"Discussion 11: DiD Lab","heading":"11.7.2 About the data","text":"need section read text run code block.Variables data set:treatment: binary variable indicating record treatment group (\\(1\\)) control group (\\(0\\))pro4: educational cultural program number 4 outcome variable (binary: \\(1\\) participated program, \\(0\\) )tapwater: tap water outcome variable (binary: \\(1\\) drink tap water, \\(0\\) )agrext: agricultural center outcome variable (binary: \\(1\\) use center, \\(0\\) )year: year record frompost_treat: binary variable indicating record pre-treatment period (\\(0\\)) post-treatment period (\\(0\\))","code":"\n# show the first few lines of the dataset\nhead(malesky2014)## # A tibble: 6 × 42\n##   goodroadv transport  pro3 tapwater roadv  rm2c7d rm2c7e\n##       <dbl>     <dbl> <dbl>    <dbl> <dbl>   <dbl>  <dbl>\n## 1         0         1     1        0     1 0       0.216 \n## 2         1         1     0        0     1 0.0109  0.164 \n## 3         1         1     1        0     1 0       0     \n## 4         1         0     0        0     1 0       0.0384\n## 5         1         0     1        0     1 0.00860 0.119 \n## 6         1         1     1        0     1 0.00857 0.357 \n## # ℹ 35 more variables: rm2c7g <dbl>, animal_s <dbl>,\n## #   agrvisit <dbl>, plant_s <dbl>, agrext <dbl>,\n## #   irrigation <dbl>, rm2c7c <dbl>, pro5 <dbl>, pro4 <dbl>,\n## #   rm2c7b <dbl>, useschool <dbl>, kgarten <dbl>,\n## #   v_prischool <dbl>, broadcast <dbl>, post <dbl>,\n## #   vpost <dbl>, rm2c7a <dbl>, rm2c7f <dbl>, market <dbl>,\n## #   nonfarm <dbl>, vmarket1 <dbl>, vmarket2 <dbl>, …"},{"path":"discussion-11-did-lab.html","id":"visualizing-trends-in-the-treatment-and-control-groups","chapter":"Discussion 11: DiD Lab","heading":"11.7.3 Visualizing Trends in the Treatment and Control Groups","text":"design, first step visualize trends treatment control groups check parallel trends assumption credible. , look one possible outcome: “Education Cultural Program.”need section run code block look plot. going plot?","code":"\n# Plot the outcome for `Education and Cultural Program`\ned_and_culture <- malesky2014 %>%\n  mutate(treatment = ifelse(treatment == 1, \"Treated in 2009\",\"Untreated\")) %>%\n  group_by(treatment, year) %>%\n  summarize(estimate = mean(pro4)) %>%\n  ggplot(aes(x = year, y = estimate, color = treatment)) + \n  geom_point() + \n  geom_line() + \n  ggtitle(\"Ed. and Cultural Program\") +\n  theme_minimal() +\n  theme(legend.position = \"none\",\n        legend.background = element_rect(fill = \"white\", colour = \"white\"),\n        plot.title = element_text(hjust = 0.5))## `summarise()` has grouped output by 'treatment'. You can\n## override using the `.groups` argument.\ned_and_culture + \n    guides(color = guide_legend(nrow = 1)) +\n    theme(legend.position = \"bottom\")"},{"path":"discussion-11-did-lab.html","id":"basic-difference-in-differences-analysis-with-one-pretreatment-period","chapter":"Discussion 11: DiD Lab","heading":"11.7.4 Basic Difference in Differences Analysis with One Pretreatment Period","text":"need section read text fill TASK pieces within code.data treatment indicator variable called treatment, \npost-treatment time period indicator called post_treat. need \ncreate interaction variable treatment*post_treat. Call \nnew variable .Now treatment, post_treat, variables, \nready estimate causal effect de-centralizing government whether \npeople participate Educational Cultural Program. outcome\nvariable case pro4. estimate causal effect \nOLS regression. Use formula discussed slides create\nmodel formula.","code":"# remove the extra pretreatment periods from the dataset\nonePerMalesky <- malesky2014 %>%\n  filter(year==2008 | year ==2010) # keep only 2008 and 2010\n\n# TASK: create the interaction term between treatment and post_treat\nonePerMalesky <- onePerMalesky %>%\n  mutate(did = ...create your interaction variable here...)# TASK: regression for Education and Cultural Program on treatment, time period, and interaction term\ndidReg <- lm(...put your formula here..., data = onePerMalesky)\n\n# TASK\nsummary(...put your DiD model object here...) # hint: what did you create above?\n\n# estimate\nprint(didReg$coefficients[\"did\"])"},{"path":"solutions-parametric-g-formula-lab.html","id":"solutions-parametric-g-formula-lab","chapter":"Solutions: Parametric g-formula Lab","heading":"Solutions: Parametric g-formula Lab","text":"goal: estimate average treatment effect (ATE) \\(E(Y^{=1}) - E(Y^{=0})\\).knew potential outcomes everyone population, just take averages.fundamental problem causal inference: can observe one potential outcome person.potential solution: create model outcome\nperson treated, know outcome treatment. use model predict outcome treated.\nperson treated, know outcome treatment. use model predict outcome treated.can predict potential outcome everyone dataset using model!","code":""},{"path":"solutions-parametric-g-formula-lab.html","id":"download-the-data-1","chapter":"Solutions: Parametric g-formula Lab","heading":"Download the Data","text":"Follow steps Ed Discussion download data!download data save variable name d, go top says knitr::opts_chunk$set(echo = TRUE, eval=F) top R Markdown file change eval true, .e. set eval=T knit file, code runs.","code":"\nlibrary(tidyverse)## ── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──\n## ✔ dplyr     1.1.4     ✔ readr     2.1.5\n## ✔ forcats   1.0.0     ✔ stringr   1.5.1\n## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n## ✔ purrr     1.0.4     \n## ── Conflicts ────────────────────── tidyverse_conflicts() ──\n## ✖ dplyr::filter() masks stats::filter()\n## ✖ dplyr::lag()    masks stats::lag()\n## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\nd <- readRDS(\"assets/discussions/d.RDS\")"},{"path":"solutions-parametric-g-formula-lab.html","id":"step-0-learn-a-model-to-predict-y-given-avecl","chapter":"Solutions: Parametric g-formula Lab","heading":"Step 0: Learn a model to predict \\(Y\\) given \\(\\{A,\\vec{L}\\}\\)","text":"can learn lm function .\nNote function takes several arguments. first argument formula, specifically symbolic description model fitted.First, create formula f represents outcome y function treatment confounders. , using lm() function, fit model linear regression.","code":"\nf <- y ~ a*(sex + race + mom_educ + dad_educ + log_parent_income + log_parent_wealth + test_percentile)\n\n# Estimate the model with OLS\nfit <- lm(formula = f, data = d)"},{"path":"solutions-parametric-g-formula-lab.html","id":"step-1-create-two-copies-of-the-original-data","chapter":"Solutions: Parametric g-formula Lab","heading":"Step 1: Create Two Copies of the Original Data","text":"Next, going create two copies original data. first copy set treatment values = \"no_college\" second copy set treatment values = \"college\".","code":"\nd_all_control <- d %>%\n  mutate(a = \"no_college\")\n\nd_all_treated <- d %>%\n  mutate(a = \"college\")"},{"path":"solutions-parametric-g-formula-lab.html","id":"step-2-predict-both-potential-outcomes-for-everyone","chapter":"Solutions: Parametric g-formula Lab","heading":"Step 2: Predict both potential outcomes for everyone","text":"Next use model (estimated ) predict potential outcomes individual using two data.frames just created. append estimated potential outcomes original data.see details predict function, see \ndocumentation .","code":"\n# Estimate potential outcomes using our model\npotential_outcomes_under_control <- predict(object = fit, newdata = d_all_control)\npotential_outcomes_under_treatment <- predict(object = fit, newdata = d_all_treated)\n\n# append the estimated potential outcomes to our original data.\nconditional_average_outcomes <- d %>%\n  mutate(yhat0 = potential_outcomes_under_control,\n         yhat1 = potential_outcomes_under_treatment)"},{"path":"solutions-parametric-g-formula-lab.html","id":"step-3-estimate-the-causal-effect","chapter":"Solutions: Parametric g-formula Lab","heading":"Step 3: Estimate the causal effect","text":"Now let’s compute causal effect taking difference potential outcomes averaging.One way :alternative way compute treatment effect ","code":"\nconditional_average_effects <- conditional_average_outcomes %>%\n  mutate(effect = yhat1 - yhat0)\n\nconditional_average_effects %>%\n  select(yhat1, yhat0, effect) %>%\n  summarise_all(.funs = mean)## # A tibble: 1 × 3\n##   yhat1 yhat0 effect\n##   <dbl> <dbl>  <dbl>\n## 1 0.404 0.163  0.241\nconditional_average_outcomes %>%\nsummarize(ate = mean(yhat1 - yhat0))## # A tibble: 1 × 1\n##     ate\n##   <dbl>\n## 1 0.241"},{"path":"solutions-parametric-g-formula-lab.html","id":"extension-1-conditional-average-effects","chapter":"Solutions: Parametric g-formula Lab","heading":"Extension 1: Conditional average effects","text":"Modify procedure estimate average effect subgroups defined mom’s education:sex == Malethose sex == FemaleSpecifically means, average effect among sex == Male?\nAmong sex == Female? HINT: slight modification\ncode takes average whole data.frame.","code":"\nconditional_average_effects %>%\n  select(yhat1, yhat0, effect, sex) %>%\n  group_by(sex) %>%\n  summarise(across(.fns = mean))## Warning: There was 1 warning in `summarise()`.\n## ℹ In argument: `across(.fns = mean)`.\n## Caused by warning:\n## ! Using `across()` without supplying `.cols` was deprecated\n##   in dplyr 1.1.0.\n## ℹ Please supply `.cols` instead.## # A tibble: 2 × 4\n##   sex    yhat1 yhat0 effect\n##   <chr>  <dbl> <dbl>  <dbl>\n## 1 Female 0.348 0.129  0.219\n## 2 Male   0.460 0.196  0.263"},{"path":"solutions-parametric-g-formula-lab.html","id":"extension-2-logistic-regression","chapter":"Solutions: Parametric g-formula Lab","heading":"Extension 2: Logistic regression","text":"groups: Repeat steps logistic regression\\[\\text{log}\\left(\\frac{\\hat{P}\\left(Y\\mid = , \\vec{L} = \\vec\\ell\\right)}{1 - \\hat{P}\\left(Y\\mid = , \\vec{L} = \\vec\\ell\\right)}\\right) = \\hat\\alpha + \\hat\\beta + \\vec{L}'\\hat{\\vec\\gamma} + \\vec{L}'\\hat{\\vec\\eta}\\] Helpful hints:simple extension code uses lm().Read using glm() estimate logistic regressionwhen using predict(), search find predict probabilities","code":""},{"path":"solutions-parametric-g-formula-lab.html","id":"extension-logistic-regression","chapter":"Solutions: Parametric g-formula Lab","heading":"Extension: Logistic regression","text":"Fit model","code":"\nf <- y ~ a*(sex + race + mom_educ + dad_educ + log_parent_income +\n  log_parent_wealth + test_percentile)\n\nfit <- glm(formula = f, family = binomial, data = d)"},{"path":"solutions-parametric-g-formula-lab.html","id":"extension-logistic-regression-1","chapter":"Solutions: Parametric g-formula Lab","heading":"Extension: Logistic regression","text":"Predict summarize estimate average effect","code":"\npotential_outcomes_under_control <- predict(object = fit, newdata = d_all_control, type = \"response\")\npotential_outcomes_under_treatment <- predict(object = fit, newdata = d_all_treated, type = \"response\")\n\nconditional_average_outcomes <- d %>%\n  mutate(yhat1 = potential_outcomes_under_treatment,\n         yhat0 = potential_outcomes_under_control,\n         effect = yhat1 - yhat0) %>%\n  select(yhat1, yhat0, effect) %>%\n  summarise(across(.fns = mean))\n\nconditional_average_outcomes## # A tibble: 1 × 3\n##   yhat1 yhat0 effect\n##   <dbl> <dbl>  <dbl>\n## 1 0.406 0.165  0.241"},{"path":"due-dates.html","id":"due-dates","chapter":"Due dates","heading":"Due dates","text":"’ll post due dates throughout semester.","code":""},{"path":"due-dates.html","id":"upcoming","chapter":"Due dates","heading":"Upcoming","text":"Project Final Paper: Due Monday, December 9th 11:59pmProject Final Paper: Due Monday, December 9th 11:59pmProject Video Presentation: Due Dec 18th longer video presentation.Project Video Presentation: Due Dec 18th longer video presentation.","code":""},{"path":"due-dates.html","id":"past","chapter":"Due dates","heading":"Past","text":"Project Task 2: Due Thursday, October 17th 11:59pm via CanvasProject Task 2: Due Thursday, October 17th 11:59pm via CanvasPset 1: Due Tuesday, September 10th 5pmPset 1: Due Tuesday, September 10th 5pmPset 1 Peer Reviews: Due Tuesday, September 17th 5pmPset 1 Peer Reviews: Due Tuesday, September 17th 5pmPset 2: Due Tuesday, September 24th 11:59pmPset 2: Due Tuesday, September 24th 11:59pmPset 2 Peer Reviews: Due Tuesday, October 1st 11:59pmPset 2 Peer Reviews: Due Tuesday, October 1st 11:59pmProject Task 1: Due Thursday, October 3rd 11:59pmProject Task 1: Due Thursday, October 3rd 11:59pmPset 3: Due Friday, October 11th 11:59pm via CanvasPset 3: Due Friday, October 11th 11:59pm via CanvasPset 3 Peer Reviews: Due Thursday, October 24th 11:59pm (released Oct 16)Pset 3 Peer Reviews: Due Thursday, October 24th 11:59pm (released Oct 16)Pset 4: Due Friday, October 25th 11:59pm (released Oct 17)Pset 4: Due Friday, October 25th 11:59pm (released Oct 17)Submit Project Topic Preferences Thursday, Oct 31st 5pm. details, refer Canvas Ed (note count toward grade).Submit Project Topic Preferences Thursday, Oct 31st 5pm. details, refer Canvas Ed (note count toward grade).Pset 4 Peer Reviews: Due Friday, November 1st 11:59pm (released Oct 28)Pset 4 Peer Reviews: Due Friday, November 1st 11:59pm (released Oct 28)Pset 5: Due Thursday, November 7th 11:59pm (released Oct 31)Pset 5: Due Thursday, November 7th 11:59pm (released Oct 31)Pset 5 Peer Reviews: Due Friday Nov 15 11:59pm (released Nov 11)Pset 5 Peer Reviews: Due Friday Nov 15 11:59pm (released Nov 11)Project Task 3 & 4 Check-: Due Sunday Nov 17 11:59pm (released Nov 5)Project Task 3 & 4 Check-: Due Sunday Nov 17 11:59pm (released Nov 5)Pset 6: Due Sunday, November 24th Thursday, November 21st (released Nov 14th) Note: peer reviewsPset 6: Due Sunday, November 24th Thursday, November 21st (released Nov 14th) Note: peer reviews","code":""},{"path":"course-project.html","id":"course-project","chapter":"Course Project","heading":"Course Project","text":"course project opportunity engage course content via real-world example. course semester, walk entire causal analysis: starting defining causal question way communicating results analysis. Parts project done individuals parts completed group. assign parts project throughout semester give detailed instructions time. also plenty check-ins along way make sure ’re right track.Project Overview expectationsTask 1 Details .Rmd file fill outTask 2 Details .Rmd file fill outTask 3 & Task 4 Check-Details optional .Rmd file fill outTask 5 Details .Rmd template use.","code":""},{"path":"problem-set-1.-definitions.html","id":"problem-set-1.-definitions","chapter":"Problem Set 1. Definitions","heading":"Problem Set 1. Definitions","text":"Relevant material covered Aug 29. Problem set due Sept 10 5pm.Welcome problem set! homework practice conceptual notation ideas descriptive causal inference.complete problem set, Download .Rmd complete homework. Omit name can anonymous peer feedback. Compile PDF submit PDF Canvas.","code":""},{"path":"problem-set-1.-definitions.html","id":"practice-with-potential-outcomes","chapter":"Problem Set 1. Definitions","heading":"1. Practice with potential outcomes","text":"Jose says coming Cornell caused discover statistics, became major! says gone NYU, stuck biology.","code":""},{"path":"problem-set-1.-definitions.html","id":"points","chapter":"Problem Set 1. Definitions","heading":"1.1 (7 points)","text":"Jose’s claim, treatment?Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-1","chapter":"Problem Set 1. Definitions","heading":"1.2 (7 points)","text":"Using mathematical notation discussed class, define two potential outcomes Jose referringAnswer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-2","chapter":"Problem Set 1. Definitions","heading":"1.3 (7 points)","text":"sentence two, say Fundamental Problem Causal Inference applies Jose’s claim.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-3","chapter":"Problem Set 1. Definitions","heading":"1.4 (7 points)","text":"Using conditional expectations probabilities, write following math: probability majoring statistics higher among students attend Cornell among students attend NYU.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-4","chapter":"Problem Set 1. Definitions","heading":"1.5 (7 points)","text":"Give one reason average causal effect attending Cornell versus NYU (quantity 1.2, averaged students) might different average descriptive difference (1.4) rates majoring statistics.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"a-sailing-class","chapter":"Problem Set 1. Definitions","heading":"2. A sailing class","text":"looking sailing class Cornell Wellness! claim , tell us whether claim causal descriptive.","code":""},{"path":"problem-set-1.-definitions.html","id":"points-5","chapter":"Problem Set 1. Definitions","heading":"2.1 (5 points)","text":"Last year, survey students take class. proportion reporting felt prepared sail Cayuga Lake higher among took class.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-6","chapter":"Problem Set 1. Definitions","heading":"2.2 (5 points)","text":"Last year, survey students class. proportion reporting felt prepared sail Cayuga Lake higher survey taken class.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"points-7","chapter":"Problem Set 1. Definitions","heading":"2.3 (5 points)","text":"average, students class emerged prepared sail without class.Answer. answer ","code":""},{"path":"problem-set-1.-definitions.html","id":"session-info","chapter":"Problem Set 1. Definitions","heading":"Session info","text":"chunk record information R session, useful debugging issues homework assignments contain code.","code":"\nsessionInfo()## R version 4.5.0 (2025-04-11)\n## Platform: x86_64-pc-linux-gnu\n## Running under: Ubuntu 22.04.5 LTS\n## \n## Matrix products: default\n## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 \n## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0\n## \n## locale:\n##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n## \n## time zone: America/New_York\n## tzcode source: system (glibc)\n## \n## attached base packages:\n## [1] stats     graphics  grDevices utils     datasets \n## [6] methods   base     \n## \n## loaded via a namespace (and not attached):\n##  [1] digest_0.6.37     R6_2.6.1          bookdown_0.43    \n##  [4] fastmap_1.2.0     xfun_0.52         glue_1.8.0       \n##  [7] cachem_1.1.0      knitr_1.50        memoise_2.0.1    \n## [10] htmltools_0.5.8.1 rmarkdown_2.29    lifecycle_1.0.4  \n## [13] xml2_1.3.8        cli_3.6.5         downlit_0.4.4    \n## [16] vctrs_0.6.5       sass_0.4.10       withr_3.0.2      \n## [19] jquerylib_0.1.4   compiler_4.5.0    rstudioapi_0.17.1\n## [22] tools_4.5.0       pillar_1.10.2     evaluate_1.0.4   \n## [25] bslib_0.9.0       yaml_2.3.10       fs_1.6.6         \n## [28] jsonlite_2.0.0    rlang_1.1.6"},{"path":"problem-set-2.-experiments.html","id":"problem-set-2.-experiments","chapter":"Problem Set 2. Experiments","heading":"Problem Set 2. Experiments","text":"Relevant material covered Sep 11. Problem set due Sep 24.complete problem set, Download .Rmd complete homework. Omit name can anonymous peer feedback. Compile PDF submit PDF Canvas.problem set based :Bertrand, M & Mullainathan, S. 2004. “Emily Greg Employable Lakisha Jamal? Field Experiment Labor Market Discrimination.” American Economic Review 94(4):991–1013.’s heads-hard problem setfor , reading social science paper hardfor , mathematical statistics hardfor , R coding hardFor almost one three easy.want support succeed! Text format help .","code":""},{"path":"problem-set-2.-experiments.html","id":"conceptual-questions-about-the-study-design","chapter":"Problem Set 2. Experiments","heading":"1. Conceptual questions about the study design","text":"Read first 10 pages paper (end section 2).","code":""},{"path":"problem-set-2.-experiments.html","id":"points-fundamental-problem","chapter":"Problem Set 2. Experiments","heading":"1.1. (5 points) Fundamental Problem","text":"One submitted resume name “Emily Baker.” yielded callback. resume name “Lakisha Washington.” Explain Fundamental Problem Causal Inference applies case (1–2 sentences).","code":""},{"path":"problem-set-2.-experiments.html","id":"points-exchangeability","chapter":"Problem Set 2. Experiments","heading":"1.2. (5 points) Exchangeability","text":"sentence, state exchangeability means study. concreteness, question may suppose names study “Emily Baker” “Lakisha Washington.”","code":""},{"path":"problem-set-2.-experiments.html","id":"points-something-you-liked","chapter":"Problem Set 2. Experiments","heading":"1.3. (10 points) Something you liked","text":"State something concrete appreciate study design, randomization.","code":""},{"path":"problem-set-2.-experiments.html","id":"analyzing-the-experimental-data","chapter":"Problem Set 2. Experiments","heading":"2. Analyzing the experimental data","text":"Load packages code use.complete rest assignment, need download study’s data OpenICPSR: https://www.openicpsr.org/openicpsr/project/116023/version/V1/view. require creating account agreeing terms using data ethically. Put data folder computer .Rmd located. Read data R using read_dta.error, might need set working directory first. tells R look data files. words, data file needs folder homework file, RStudio needs told folder look . top RStudio, click Session -> Set Working Directory -> Source File Location.now see d Global Environment top right RStudio.use four variables:2.1–2.4, think race treatment. 2.5–2.6, think firstname treatment.Restrict variables using select().new R, just happened:created new object d_selectedused assignment operator <- put something objectwe started data object dwe used pipe operator %>% hand d new actionthe action select() selected variables interestWe often analyze data starting data object handing series actions connected pipe %>%","code":"\nlibrary(tidyverse)\nlibrary(haven)\nd <- read_dta(\"assets/data/lakisha_aer.dta\")\nd <- read_dta(\"assets/data/lakisha_aer_aggregated.dta\")\nd_selected <- d %>%\n  select(call, firstname, race, sex)"},{"path":"problem-set-2.-experiments.html","id":"points-point-estimates-of-expected-potential-outcomes","chapter":"Problem Set 2. Experiments","heading":"2.1. (5 points) Point estimates of expected potential outcomes","text":"top Table 1 reports callback rates: 9.65% white names 6.45% Black names. Reproduce numbers. , take code add group_by() action d_selected summarize.’s reference introduces group_by summarize.","code":"\nd_summarized <- d_selected %>%\n  summarize(callback_rate = mean(call),\n            number_cases = n()) %>%\n  print()## # A tibble: 1 × 2\n##   callback_rate number_cases\n##           <dbl>        <int>\n## 1        0.0805         4870"},{"path":"problem-set-2.-experiments.html","id":"points-inference-for-expected-potential-outcomes","chapter":"Problem Set 2. Experiments","heading":"2.2. (5 points) Inference for expected potential outcomes","text":"Use mutate() (see reference page) create new columns containing standard error estimate well lower upper limits 95% confidence intervals.Suppose \\(\\pi^\\) probability callback treatment condition \\(\\). Let \\(\\hat\\pi^\\) estimate unknown probability, meaning \\(\\hat\\pi^\\) proportion people treatment condition receive callback experiment (computed 2.1). making confidence interval \\(\\hat\\pi^\\), estimate \\(\\hat\\pi^\\) standard error standard error \\(\\hat\\pi^\\)make easier, quick math review R functions can use.Standard error math. Let \\(Y^\\) Bernoulli random variable, taking value 1 random resume name \\(\\) yields callback 0 otherwise. Let \\(\\pi^= P(Y^=1)\\) probability callback. statistics, know variance \\(V(Y^) = \\pi^(1-\\pi^)\\). estimated average: \\(\\hat\\pi^= \\frac{1}{n_a}\\sum_{:A_i=} Y_i^\\). many times many hypothetical samples, always get estimate. fact, estimate sampling variance \\(V(\\hat\\pi^) = \\frac{\\pi^(1-\\pi^)}{n_a}\\). know \\(\\hat\\pi^\\) mean \\(n_a\\) independent identically distributed random variables \\(Y^\\). standard error square root sampling variance: \\(SE(\\hat\\pi^) = \\sqrt\\frac{\\pi^(1-\\pi^)}{n_a}\\). can estimate standard error plugging estimate \\(\\hat\\pi^\\) true unknown \\(\\pi^\\) wherever appears.Standard error code. translated standard error formula code . function accepts estimated probability p sample size n returns estimated standard error. can use se_binary() function code within mutate() just like mean() used within summarize() start problem set.Sampling distribution math. \\(\\hat\\pi^\\) sample mean, know something sampling distribution: limit sample size grows infinity, across hypothetical repeated samples distribution \\(\\hat\\pi^\\) estimates becomes Normal. Central Limit Theorem! Across repeated samples, middle 95% estimates fall within known range: \\(\\pi^\\pm \\Phi^{-1}(.975) \\times SE(\\hat\\pi^)\\), \\(\\Phi^{-1}()\\) inverse cumulative distribution function standard Normal distribution. might previously learned \\(\\Phi^{-1}(.975) \\approx 1.96\\), might familiar number 1.96.Sampling distribution graph.Confidence interval math. get 95% confidence interval plugging estimates \\(\\hat\\pi^\\) \\(\\widehat{SE}(\\hat\\pi^)\\) limits . interval centered estimate \\(\\hat\\pi^\\) nice property: repeatedly made confidence interval procedure using hypothetical samples population, interval contain unknown true parameter \\(\\pi^\\) 95% time.Confidence interval code. translated confidence interval formula code . functions accept estimate standard error return lower upper bounds (respectively) 95% confidence interval assumes Normal sampling distribution. can use functions code within mutate() just like mean() used within summarize() start problem set.","code":"\nse_binary <- function(p, n) {\n  se <- sqrt( p * (1 - p) / n )\n  return(se)\n}\nci_lower <- function(estimate, standard_error) {\n  estimate - qnorm(.975) * standard_error\n}\nci_upper <- function(estimate, standard_error) {\n  estimate + qnorm(.975) * standard_error\n}"},{"path":"problem-set-2.-experiments.html","id":"points-interpret-your-confidence-interval","chapter":"Problem Set 2. Experiments","heading":"2.3. (5 points) Interpret your confidence interval","text":"words, interpret confidence intervals. sure discuss property hypothetical repeated samples, sure frame answer using numbers variables actual experiment analyzing.","code":""},{"path":"problem-set-2.-experiments.html","id":"points-visualize-expected-potential-outcomes","chapter":"Problem Set 2. Experiments","heading":"2.4. (5 points) Visualize expected potential outcomes","text":"Using ggplot(), visualize estimated callback rate race. Use geom_point() point estimates geom_errorbar() confidence intervals, race x axis estimates y axis. Label axes using full words.never used ggplot, see Ch 3 R Data Science Hadley Wickham.","code":""},{"path":"problem-set-2.-experiments.html","id":"points-estimate-and-visualize-by-firstname","chapter":"Problem Set 2. Experiments","heading":"2.5. (5 points) Estimate and visualize by firstname","text":"distinct first names yield distinct effects? Repeat coding steps 2.2–2.4, now create estimates grouped race, sex, firstname. Visualize point estimates confidence intervals.One way visualize placing first names \\(x\\)-axis using facet_wrap() layer facet race sex.strategy visualize fine, long shows estimates firstname indicates race sex signaled firstname\n2.4, making two estimates: one white one Black. 2.5, aggregating within fine-grained set groups defined race, sex, firstname. need start fresh raw person-level data order answer 2.5","code":"\nyour_ggplot +\n  facet_wrap(~ race + sex,\n             scales = \"free_x\", \n             nrow = 1)"},{"path":"problem-set-2.-experiments.html","id":"points-interpret","chapter":"Problem Set 2. Experiments","heading":"2.6. (5 points) Interpret","text":"Within race sex, first names effect. Suppose true differences (due sampling variability). tell importance researcher decisions names use treatments? many possible right answers, asking think might mean research design names different effects.","code":""},{"path":"problem-set-3.-dags..html","id":"problem-set-3.-dags.","chapter":"Problem Set 3. DAGs.","heading":"Problem Set 3. DAGs.","text":"Relevant material covered Oct 1. Problem set due Oct 11.complete problem set, copy code .Rmd complete homework. Omit name can anonymous peer feedback. Compile PDF submit PDF Canvas.Note: problem set , may alternatively complete homework hand. welcome draw DAGs hand instead producing code. , scan take picture document.","code":""},{"path":"problem-set-3.-dags..html","id":"true-or-false","chapter":"Problem Set 3. DAGs.","heading":"1. True or False","text":"1.1–1.5, answer True False: \\(Z\\) nodes (.e., either \\(Z\\) set \\(\\{Z_1, Z_2, \\ldots \\}\\)) form sufficient adjustment set identify causal effect \\(\\) \\(Y\\). Explain answer one sentence. False, state backdoor path unblocked conditional \\(Z\\).","code":""},{"path":"problem-set-3.-dags..html","id":"points-8","chapter":"Problem Set 3. DAGs.","heading":"1.6 (4 points)","text":"True False? Conditioning \\(C\\) blocks path: \\(\\leftarrow B \\rightarrow C \\leftarrow D \\rightarrow Y\\). Explain answer.","code":""},{"path":"problem-set-3.-dags..html","id":"points-9","chapter":"Problem Set 3. DAGs.","heading":"1.7 (4 points)","text":"True False? Conditioning \\(C\\) blocks path: \\(\\leftarrow B \\leftarrow C \\rightarrow D \\rightarrow Y\\). Explain answer.","code":""},{"path":"problem-set-3.-dags..html","id":"draw-a-dag","chapter":"Problem Set 3. DAGs.","heading":"2. Draw a DAG","text":"problem, reference idea “adjusting ” variable \\(X\\). using terminology “adjust ” equivalent terminology “condition .” adjust condition \\(X\\) means conduct analysis conditional \\(X\\).Building intuition standardization, adjust condition \\(X\\) means toconduct analysis within subgroup \\(X = x\\) (example: estimate relationship \\(\\) \\(Y\\) among \\(X = x\\))average \\(x\\)-specific estimates population distribution \\(X\\)","code":""},{"path":"problem-set-3.-dags..html","id":"your-task-12-points","chapter":"Problem Set 3. DAGs.","heading":"2.1. Your Task (12 points)","text":"researcher comes proposal: identify causal effect \\(\\) \\(Y\\) adjusting variable \\(B\\) predicts \\(\\) also predicts \\(Y\\). propose machine learning can thus solve causal identification us.researcher wrong. Show . Draw DAG whichthe effect \\(\\) \\(Y\\) unconfounded (.e. marginal exchangeability holds)variable \\(B\\) statistically associated \\(\\)variable \\(B\\) statistically associated \\(Y\\)one need adjust \\(B\\) identify causal effectFor full credit, need draw DAG. need explain answer, although encourage write explanation sake, make sure DAG says expect!See https://rpubs.com/brianwood1/698510 insert image.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"problem-set-4.-statistical-modeling","chapter":"Problem Set 4. Statistical Modeling","heading":"Problem Set 4. Statistical Modeling","text":"Relevant material covered Oct 17. Problem set due Oct 25.complete problem set:Copy Paste .Rmd file complete homework.Omit name can anonymous peer feedback. Compile PDF submit PDF Canvas.problem set uses data following paper:Dehejia, R. H. Wahba, S. 1999. Causal Effects Nonexperimental Studies: Reevaluating Evaluation Training Programs. Journal American Statistical Association 94(448):1053–1062.paper compares methods observational causal inference recover average causal effect already known randomized experiment. need read paper; just use study’s data illustration.following lines load data R.","code":"library(tidyverse)\nlibrary(MatchIt)\nlibrary(randomForest)\ndata(\"lalonde\")"},{"path":"problem-set-4.-statistical-modeling.html","id":"points-drawbacks-of-exact-matching","chapter":"Problem Set 4. Statistical Modeling","heading":"1. (10 points) Drawbacks of Exact Matching","text":"discussion section Wednesday, October 16th, walked example exact matching high-dimensional confounding. looked statistics information re74 values full data versus matched data. Answer following questions observed:Notice difference values re74 full data versus matched data. Explain happened happened.light example, drawback using exact matching type setting?Answer.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"points-outcome-modeling","chapter":"Problem Set 4. Statistical Modeling","heading":"2. (6 points) Outcome modeling","text":"code , use randomForest learn model future earnings re78 treatment treat, interacted confounders: race, married, nodegree, re74. random forest machine learning method trains multiple decision trees final prediction model.Knowing decision trees random forests necessary course problem set. However, interested learning machine learning methods, can take look cool (free) Google course watch short video IBM Technology.\nDocumentation R Library randomForest can found hereYOUR TASK: Use model estimate average treatment effect among treated (ATT). o make code easier grade, break task following three steps:Create two data frames lalonde data:\nfirst contain treated individuals (factual treatment 1)\nsecond contain treated individuals, treat set value 0.\nHint: data frames contain individuals actually treated. One way filter function.\nfirst contain treated individuals (factual treatment 1)second contain treated individuals, treat set value 0.Hint: data frames contain individuals actually treated. One way filter function.Using outcome_model , predict expected outcomes two data frames created step 1.Report average treatment effect among treated (ATT).","code":"outcome_model <- randomForest(re78 ~ treat * (race + married + nodegree + re74), \n                              data = lalonde, \n                              ntree=1000, keep.forest=TRUE)\n# Your code goes here"},{"path":"problem-set-4.-statistical-modeling.html","id":"matching-without-requiring-exact-matches","chapter":"Problem Set 4. Statistical Modeling","heading":"3. Matching without requiring exact matches","text":"hope class prepared learn new causal estimators, apply R, explain done. question chance practice! class discussed many matching approaches. question, choose approach. many correct answers, evaluated clarity code explanations.Task: Using matchit, conduct matching estimate ATT treat treatment sufficient adjustment set race, married, nodegree, re74.Use matchit, setting method, distance, arguments (like replace, caliper, ratio) values choosing. requirements \nformula = treat ~ race + married + nodegree + re74\nestimand = \"ATT\"\nmethod, may use exact.\nformula = treat ~ race + married + nodegree + re74estimand = \"ATT\"method, may use exact.Create matched dataset using match.data()Using linear regression lm(), estimate model using formula re78 ~ treat + race + married + nodegree + re74 matched data, weighted weights produced match.data().Report estimate ATT.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"points-conduct-the-matching","chapter":"Problem Set 4. Statistical Modeling","heading":"3.1. (5 points) Conduct the matching","text":"space conduct matching. expect part R code chunk.","code":"\n# Your code goes here"},{"path":"problem-set-4.-statistical-modeling.html","id":"points-explain-your-choices","chapter":"Problem Set 4. Statistical Modeling","heading":"3.2. (5 points) Explain your choices","text":"sentences, tell us matching approach chosen. Cite content lecture discussion slides answer including slide number(s) date(s).Answer.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"points-how-many-units-did-you-keep","chapter":"Problem Set 4. Statistical Modeling","heading":"3.3. (2 points) How many units did you keep?","text":"Report number treated control units original data, many kept matching procedure.Answer.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"points-report-your-causal-estimate","chapter":"Problem Set 4. Statistical Modeling","heading":"3.4. (2 points) Report your causal estimate","text":"estimate average treatment effect treated? coefficient treat linear regression fit matched data.Answer.","code":""},{"path":"problem-set-4.-statistical-modeling.html","id":"points-reflection-question","chapter":"Problem Set 4. Statistical Modeling","heading":"4. (10 points) Reflection Question","text":"Answer one following two prompts short paragraph. full credit, must refer least two lecture discussion slides exercises relate choose write . cite slides, simply reference slide number date. citing exercise/.Rmd notebook discussion lecture, indicate date, title, subsection appropriate.Reflect overall experience Unit 5: Statistical Modeling : describing interesting idea tool learned, interesting , tells causal inference.Reflect overall experience Unit 5: Statistical Modeling : describing interesting idea tool learned, interesting , tells causal inference.Reflect overall experience problem set telling us particular question found challenging, hard , approached problem, learned struggling problem.Reflect overall experience problem set telling us particular question found challenging, hard , approached problem, learned struggling problem.Answer.","code":""},{"path":"problem-set-5.-iv-rd.html","id":"problem-set-5.-iv-rd","chapter":"Problem Set 5. IV + RD","heading":"Problem Set 5. IV + RD","text":"Relevant material covered Oct 31. Problem set due Nov 7.complete problem set, feel free Download .Rmd pdf. Omit name can anonymous peer feedback. Submit PDF Canvas.learning goals completing problem set engage conceptual assumptions instrumental variables regression discontinuity apply methods data real-world example order answer causal question using R.allowed use outside resources study work problem set. However, , must cite source receive credit. addition, use generative AI prohibited. addition, receive credit, must use terminology class (lecture slides discussion material). circumstances directly copy paste work , including online resources, students, AI-generated text/code.","code":""},{"path":"problem-set-5.-iv-rd.html","id":"points-instrumental-variables-in-experiments","chapter":"Problem Set 5. IV + RD","heading":"1. (25 points) Instrumental variables in experiments","text":"Suppose professor Cornell interested effect attending office hours students final grade. randomly select students receive email encouraging regularly attend office hours.many cases, whether student received email \\(Z\\) determines actual treatment \\(\\) (\\(Z = 1\\) \\(= 1\\), \\(Z = 0\\) \\(= 0\\)). difficulties:students interest class material (\\(U\\)). matter value \\(Z\\), students attend office hours(\\(= 0\\)).students lot interest class material (\\(U\\)) regardless value \\(Z\\), students attend office hours (\\(= 1\\)).Answer following sentence .(2 points) intent treat effect useful know?(2 points) intent treat effect useful know?(2 points) always-takers?(2 points) always-takers?(2 points) never-takers?(2 points) never-takers?(2 points) compliers?(2 points) compliers?(2 points) Although discussed , describe someone defier.(2 points) Although discussed , describe someone defier.(5 points) assumption made credible randomization \\(Z\\)? call assumption class?(5 points) assumption made credible randomization \\(Z\\)? call assumption class?(5 points) Suppose causal graph drawn correct. particular, receiving email encouraging student attend office hours makes feel better supported email direct positive impact final grade (regardless whether attend office hours). means include edge \\(Z \\rightarrow Y\\) graph. true, estimated causal effect differ true causal effect? Specifically, larger smaller? Explain answer referring part Wald estimator (\\((E(Y \\mid Z = 1) - E(Y \\mid Z = 0)) / (E(\\mid Z = 1) - E(\\mid Z = 0))\\) incorrect. assumption discussed class situation relate ? must cite lecture slide receive credit.(5 points) Suppose causal graph drawn correct. particular, receiving email encouraging student attend office hours makes feel better supported email direct positive impact final grade (regardless whether attend office hours). means include edge \\(Z \\rightarrow Y\\) graph. true, estimated causal effect differ true causal effect? Specifically, larger smaller? Explain answer referring part Wald estimator (\\((E(Y \\mid Z = 1) - E(Y \\mid Z = 0)) / (E(\\mid Z = 1) - E(\\mid Z = 0))\\) incorrect. assumption discussed class situation relate ? must cite lecture slide receive credit.(5 points) Suppose causal graph drawn correct. particular, emails got caught spam filter, student actually received email. Explain Wald estimator give unreliable estimate true causal effect. assumption discussed class situation relate ? must cite lecture slide receive credit.(5 points) Suppose causal graph drawn correct. particular, emails got caught spam filter, student actually received email. Explain Wald estimator give unreliable estimate true causal effect. assumption discussed class situation relate ? must cite lecture slide receive credit.","code":""},{"path":"problem-set-5.-iv-rd.html","id":"points-regression-discontinuity-design-rdd","chapter":"Problem Set 5. IV + RD","heading":"2. (10 points) Regression Discontinuity Design (RDD)","text":"2.1. (3 points) words, explain key assumption regression discontinuity. answer include means intuitively, means math, ’s important.Answer:2.2. (7 points) Draw two images hand:first, draw visual representation looks like assumption satisfiedIn second, draw visual representation looks like assumption satisfiedInclude picture hand-drawn images . YouTube video shows include image RMarkdown. Make sure axes, variables, cutoffs, etc clearly labeled. may include short sentence explaining describing picture, required.Answer:","code":""},{"path":"problem-set-5.-iv-rd.html","id":"iv-and-rdd-in-r","chapter":"Problem Set 5. IV + RD","heading":"IV and RDD in R","text":"section, pick ONE coding question (either number 3 number 4) answer. get extra points . , peers graders instructed grade first one.","code":""},{"path":"problem-set-5.-iv-rd.html","id":"points-estimating-a-causal-effect-via-instrumental-variables","chapter":"Problem Set 5. IV + RD","heading":"3. (10 points) Estimating a causal effect via instrumental variables","text":"paper Using Geographic Variation College Proximity Estimate Return Schooling, Aspects Labour Market Behavior economist David Card estimates causal effect schooling wages. Specifically, treatment interest (\\(A_i\\)) number years schooling (1 18; 12 indicates completing high school values 12 indicate college even graduate school) outcome interest (\\(Y_i\\)) wages 1976 measured cents. course, many confounders present, Card uses growing near 4yr college instrument (\\(Z_i\\)). particular, argues growing near 4yr college increases years education making individual likely go college \\(Z_i \\rightarrow A_i\\). However, argues growing near 4 year college causal effect wages except education levels.can access data package. However, since ’s easily installable R, provided alternative get data :","code":"\ncard <- read.csv(\"https://raw.githubusercontent.com/causal3900/causal3900.github.io/refs/heads/main/assets/data/card.csv\")\n\n###\n# this variable indicates whether someone grew up near a 4 year college or not\ncard$nearc4 \n# this variable indicates years of education\ncard$educ\n# this variable indicates wages (measured in cents)\ncard$wage "},{"path":"problem-set-5.-iv-rd.html","id":"points-suppose-we-believe-the-argument-and-want-to-use-the-instrument-of-being-near-a-4-year-college.-estimate-the-causal-effect-of-years-of-education-on-wage.","chapter":"Problem Set 5. IV + RD","heading":"3.1 (5 points) Suppose we believe the argument and want to use the instrument of being near a 4 year college. Estimate the causal effect of years of education on wage.","text":"Answer:","code":""},{"path":"problem-set-5.-iv-rd.html","id":"points-there-is-some-disagreement-about-whether-the-instrumental-variables-setup-is-reasonable-in-this-setting.-playing-devils-advocate-give-at-least-one-reason-why-the-assumptions-of-instrumental-variables-might-be-violated-for-this-example.","chapter":"Problem Set 5. IV + RD","heading":"3.2 (5 points) There is some disagreement about whether the instrumental variables setup is reasonable in this setting. Playing devil’s advocate, give at least one reason why the assumptions of instrumental variables might be violated for this example.","text":"Answer:","code":""},{"path":"problem-set-5.-iv-rd.html","id":"points-estimating-a-causal-effect-via-rdd","chapter":"Problem Set 5. IV + RD","heading":"4. (10 points) Estimating a causal effect via RDD","text":"Continuing example discussion section, ’ll answer causal question based ``Randomization Inference Regression Discontinuity Design: Application Party Advantages U.S. Senate’’ Cattaneo, Frandsen, Titiunik (2015).question “sitting senator party, effect vote share?” words, democrat (resp, republican) senator, effect senator also democrat (resp, republican) share votes run office? Recall competing senator, elections every 3 years alternate senators. context, refer RDD Lab.task estimate causal effect senator election democrat democratic vote share senator election. case, outcome interest demvoteshfor1 since interested immediately following election. running variable margin victory demmn. started code .4.1 (5 points) Using rdrobust, get estimate LATE specifying kernel, model degree (p) bandwidth size (h).4.2 (5 points) happens change value p? happens change h? changes relate bias variance? full credit, try different values p h, reporting estimate standard error .Answer:","code":"\ninstall <- function(package) {\n  if (!require(package, quietly = TRUE, character.only = TRUE)) {\n    install.packages(package, repos = \"http://cran.us.r-project.org\", type = \"binary\")\n    library(package, character.only = TRUE)\n  }\n}\n\n# install and load some libraries using the function created above\ninstall(\"ggplot2\")\ninstall(\"rdrobust\")\n\n# read in the datafile\ndata <- read.csv(\"https://raw.githubusercontent.com/rdpackages-replication/CIT_2020_CUP/master/CIT_2020_CUP_senate.csv\")\noutcome <- data$demvoteshfor1\nrunning_variable <- data$demmv\n\n# your code goes here"},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"problem-set-6.-difference-in-differences-synthetic-control","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"Problem Set 6. Difference in Differences + Synthetic Control","text":"Relevant material covered Nov 14. Problem set due Nov 24 Nov 21. complete problem set, download .Rmd submit knitted PDF.learning goals completing problem set engage conceptual assumptions difference difference synthetic control. coding assignment.allowed use outside resources study work problem set, must cite sources circumstances directly copy paste work , including online resources, students, AI-generated text/code. Whenever possible, cite relevant content lecture discussion.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-difference-in-differences","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"1. (25 points) Difference in Differences","text":"figures , treated group becomes treated time 1 time 2. control group never becomes treated. Figures hypothetical scenarios depict true potential outcomes even outcomes observed actual study.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-10","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"1.1 (5 points)","text":"setting parallel trends assumption hold: , B, neither, ? Explain answer.Answer.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-11","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"1.2 (2 points)","text":"actual data analysis, can ever know certain whether Setting Setting B? ?Answer.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-12","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"1.3 (8 points)","text":"Draw plot parallel trends assumption holds, extended parallel trends hold. Make sure following clearly labeled: control group, treatment group, pre-treatment period, post-treatment period, counterfactual outcome treatment group. Insert image drawing RMarkdown, like previous pset.Answer.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-13","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"1.4 (10 points)","text":"According talked class, three benefits multiple pre-treatment periods? Pick one explain words two sentences. must cite relevant lecture slide receive credit.Answer.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-synthetic-control","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"2. (25 points) Synthetic Control","text":"example Abadie, Diamond, Hainmueller (2015) estimates effect 1990 German reunification West Germany’s GDP per capita. Using synthetic control, construct synthetic version West Germany. show selected weights plot gap observed synthetic West Germany .","code":"##    w.weights  unit.names unit.numbers\n## 1      0.135         USA            1\n## 2      0.000          UK            2\n## 3      0.507     Austria            3\n## 4      0.000     Belgium            4\n## 5      0.000     Denmark            5\n## 6      0.000      France            6\n## 8      0.000       Italy            8\n## 9      0.000 Netherlands            9\n## 10     0.000      Norway           10\n## 12     0.166 Switzerland           12\n## 14     0.146       Japan           14\n## 16     0.000      Greece           16\n## 18     0.000    Portugal           18\n## 19     0.000       Spain           19\n## 20     0.045   Australia           20\n## 21     0.000 New Zealand           21"},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-motivation","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"2.1 (10 points) Motivation","text":"Instead selecting weights using synthetic control, instead estimated potential outcome West Germany using regression approach. Specifically, consider data prior 1990 simply regress GDP per capita West Germany onto GDP per capita regions find coefficients \\(\\hat \\beta\\) \n\\[\\widehat{Y^{0}}_{t, WestGermany} = \\sum_j \\hat \\beta_{j} Y^{0}_{t, j}.\\]\nuse estimated \\(\\hat \\beta\\) predict \\(\\widehat{Y^{0}}_{t, WestGermany}\\) treatment occurs. weights gap plot shown . haven’t included regions code , don’t need worry .Looking estimated weights gap plots, might prefer synthetic control estimate regression based estimate? might prefer regression estimate synthetic control estimate?Answer.","code":"##   weights        name id\n## 1   0.373         USA  1\n## 2   0.343     Austria  3\n## 3   0.126     Belgium  4\n## 4  -0.026     Denmark  5\n## 5   0.199      France  6\n## 6   0.067 Netherlands  9\n## 7   0.038 Switzerland 12\n## 8  -0.142       Japan 14"},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-assessing-fit","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"2.2 (7.5 points) Assessing fit","text":"Using dataset, suppose wanted estimate causal effect policy implemented Portugal 1990. Looking plots , might skeptical synthetic control ? decided accept synthetic control anyway, seem causal effect?Answer.","code":""},{"path":"problem-set-6.-difference-in-differences-synthetic-control.html","id":"points-hypothesis-testing","chapter":"Problem Set 6. Difference in Differences + Synthetic Control","heading":"2.3 (7.5 points) Hypothesis testing","text":"Suppose used synthetic control countries placebo test. , show hypothetical plot gap observed synthetic values country. difference observed synthetic West Germany shown dark black line others shown gray. Note made data. However, real plot saw, confident non-zero causal effect West Germany? Explain .Answer.","code":""},{"path":"who-we-are.html","id":"who-we-are","chapter":"Who we are","heading":"Who we are","text":"","code":""},{"path":"who-we-are.html","id":"faculty","chapter":"Who we are","heading":"Faculty","text":"research interests include algorithm design analysis, high dimensional statistics, inference networks, sequential decision making uncertainty, online learning. interests causal inference primarily revolve around settings involve complex dependencies networks dynamics time.enjoy thinking problems goal discover interpretable structure underlies data generating process. includes problems areas causal discovery, graphical models, mixed membership models. many cases, methods tailored high-dimensional setting number variables considered may large compared number observed samples. applied interests vary generally social science related.","code":""},{"path":"who-we-are.html","id":"teaching-assistants","chapter":"Who we are","heading":"Teaching assistants","text":"currently working problem related Causality, particularly Causal Graph discovery Functional data. interested learn interpretable structures data hidden confounders. free time enjoy playing basketball, running hanging friends.currently working graphical models noisy measurements. interested causal discovery applications social science biology. free time like puzzles, playing pool, baking.","code":""},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
